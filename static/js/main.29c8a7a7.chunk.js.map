{"version":3,"sources":["components/Circle/Circle.module.scss","components/Icons/LoginIcon.jsx","store/actionTypes.js","constant/apiUrl.js","services/auth/auth.service.js","services/user/user.service.js","store/actions/user.action.js","store/actions/auth.action.js","forms/LoginForm/LoginForm.jsx","utils/routing.js","pages/login.jsx","pages/admin/dashboard.jsx","forms/DrugCategoryForm/DrugCategoryForm.jsx","services/admin/drug-category.service.js","constant/formActions.js","pages/common/drug/drug-category.jsx","forms/DrugUnitForm/DrugUnitForm.jsx","services/admin/drug-unit.service.js","pages/common/drug/drug-unit.jsx","utils/string.js","services/admin/drug.service.js","forms/DrugForm/DrugForm.jsx","pages/common/drug/drug.jsx","forms/DrugInstructionForm/DrugInstructionForm.jsx","services/admin/drug-instruction.service.js","pages/common/drug/drug-instruction.jsx","forms/DiseaseCategoryForm/DiseaseCategoryForm.jsx","services/admin/disease-category.service.js","pages/common/disease/disease-category.jsx","services/admin/disease.service.js","forms/DiseaseForm/DiseaseForm.jsx","pages/common/disease/disease.jsx","pages/common/notification/notification.jsx","utils/array.js","services/user/room.service.js","services/admin/room.service.js","services/user/visit.service.js","services/admin/visit.service.js","services/user/emr.service.js","pages/common/visit/visit.jsx","services/user/patient.service.js","pages/common/patient/patient.jsx","pages/common/appointment/apointment.jsx","services/admin/medical-service.service.js","forms/ServiceForm/ServiceForm.jsx","pages/common/service/service.jsx","services/admin/working-hours.service.js","pages/admin/working-hour.jsx","forms/RoomForm/RoomForm.jsx","pages/common/room/room.jsx","services/admin/user.service.js","constant/roles.js","forms/UserForm/UserForm.jsx","components/Circle/Circle.jsx","pages/admin/account.jsx","pages/admin/setting.jsx","HOCs/withPrivateRoute.jsx","components/Header.jsx","layouts/AdminLayout/AdminLayout.jsx","forms/Visit/VisitLivingFunctionForm.jsx","services/user/disease.service.js","forms/Visit/VisitDiseaseForm.jsx","forms/Visit/VisitServiceForm.jsx","services/user/drug.service.js","forms/Visit/VisitDrugForm.jsx","services/user/disease-category.service.js","services/user/medical-service.service.js","services/user/drug-category.service.js","services/user/drug-instruction.service.js","forms/Visit/VisitImagesForm.jsx","pages/common/examination/examination.jsx","pages/common/profile/profile.jsx","pages/common/patient/patient-details.jsx","layouts/PhysicianLayout/PhysicianLayout.jsx","forms/PatientForm/PatientForm.jsx","pages/receptionist/receive.jsx","layouts/ReceptionistLayout/ReceptionistLayout.jsx","components/Icons/EmailIcon.jsx","pages/verify-email.jsx","App.jsx","utils/interceptor.js","store/reducers/auth.reducer.js","store/reducers/user.reducer.js","store/rootReducer.js","store/store.js","serviceWorker.js","index.jsx"],"names":["module","exports","LoginIcon","width","height","xmlns","xmlnsXlink","version","id","x","y","viewBox","fill","xmlSpace","cx","cy","r","d","LOGIN_PENDING","LOGIN_SUCCESS","LOGIN_FAILURE","GET_PROFILE_PENDING","GET_PROFILE_SUCCESS","GET_PROFILE_FAILURE","LOGOUT","API_URL","endpointPrefix","login","email","password","url","axios","post","refreshToken","refresh_token","verifyEmailAPI","token","get","getProfile","getProfileSuccess","user","type","actionTypes","payload","getProfileAction","dispatch","a","profileRes","data","console","log","logoutAction","Cookie","remove","LoginForm","history","useHistory","useDispatch","authState","useSelector","state","userState","useEffect","role","redirectPath","getRedirectPath","replace","className","layout","autoComplete","onFinish","values","loginRes","loginData","accessToken","access_token","set","expires","Icon","component","Item","name","placeholder","Password","to","loading","loginLoading","getProfileLoading","block","size","htmlType","LoginPage","props","AdminDashboard","DrugCategoryForm","form","defaultCategory","label","initialValue","autoFocus","getDrugCategoryAPI","search","addDrugCategoryAPI","updateDrugCategoryAPI","put","deleteDrugCategoryAPI","delete","formActions","DrugCategoryPage","useState","modalVisible","setModalVisible","categories","setCategories","fetchingCategories","setFetchingCategories","modalLoading","setModalLoading","action","setAction","selectedCategory","setSelectedCategory","Form","useForm","drugCategoryForm","tableColumns","title","key","render","text","record","index","dataIndex","icon","EditOutlined","onClick","category","onConfirm","handleDelete","okText","okType","cancelText","DeleteOutlined","getDrugCategories","response","handleFormSubmit","validateFields","unit","justify","PlusOutlined","rowKey","columns","dataSource","pagination","visible","onCancel","confirmLoading","destroyOnClose","afterClose","resetFields","onOk","DrugUnitForm","defaultUnit","getDrugUnitsAPI","addDrugUnitAPI","updateDrugUnitAPI","deleteDrugUnitAPI","DrugUnitPage","drugUnits","setDrugUnits","fetchingDrugUnits","setFetchingDrugUnits","selectedUnit","setSelectedUnit","drugUnitForm","getDrugUnits","getQueryString","queryObj","Object","keys","map","join","getDrugsAPI","params","getDrugDetailsAPI","addDrugAPI","code","drug_category","price","drug_unit","Number","updateDrugAPI","deleteDrugAPI","DrugForm","defaultDrug","units","setUnits","drugDetail","setDrugDetail","catLoading","setCatLoading","unitLoading","setUnitLoading","detailLoading","setDetailLoading","catResponse","unitResponse","getDrugDetail","detailResponse","prevCats","findIndex","cat","prevUnits","u","Promise","all","getData","setFieldsValue","spinning","suffix","Option","value","DrugPage","drugs","setDrugs","fetchingDrugs","setFetchingDrugs","selectedDrug","setSelectedDrug","drugForm","thousandSeparator","displayType","drug","getDrugs","results","DrugInstructionForm","defaultInstruction","instruction","getDrugInstructionsAPI","addDrugInstructionAPI","updateDrugInstructionAPI","deleteDrugInstructionAPI","DrugInstructionPage","drugInstructions","setDrugInstructions","fetchingDrugInstructions","setFetchingDrugInstructions","selectedInstruction","setSelectedInstruction","drugInstructionForm","ins","getDrugInstructions","DiseaseCategoryForm","getDiseaseCategoryAPI","addDiseaseCategoryAPI","updateDiseaseCategoryAPI","deleteDiseaseCategoryAPI","DiseaseCategoryPage","diseaseCategoryForm","getDiseaseCategories","getDiseasesAPI","getDiseaseDetailsAPI","addDiseaseAPI","disease_category","updateDiseaseAPI","deleteDiseaseAPI","DiseaseForm","defaultDisease","diseaseDetail","setDiseaseDetail","getDiseaseDetail","DiseasePage","diseases","setDiseases","fetchingDiseases","setFetchingDiseases","selectedDisease","setSelectedDisease","diseaseForm","disease","getDiseases","NotificationPage","removeDuplicates","myArr","prop","filter","obj","pos","arr","mapObj","indexOf","getRoomAPI","addRoomAPI","number","updateRoomAPI","deleteRoomAPI","getVisitDataAPI","createVisitAPI","patientId","roomId","room_id","patient_id","listEMRAPI","query","connect","pathname","useLocation","rooms","setRooms","roomLoading","setRoomLoading","visitData","setVisitData","visitLoading","setVisitLoading","createEMRLoading","selectedRoom","setSelectedRoom","listEMR","setListEMR","visitList","visit","createdAt","Date","created_at","today","getDate","getMonth","getFullYear","room","_","__","patient","first_name","last_name","gender","ken","prev","emrObj","avatar","DOB","physician","livingFunctions","heartbeat","temp","pressure","breathing","weight","bmi","emr_diseases","emr_services","emr_drugs","images","symptom","unique","localStorage","setItem","JSON","stringify","push","handlePatientClick","includes","getRooms","adminGetRoomAPI","roomResponse","prevSelected","getItem","getVisitData","adminGetVisitDataAPI","visitDataResponse","getInitialData","localListEMRStr","localListEMRObj","parse","style","onChange","flex","length","description","listAllPatientsAPI","getPatientDetailsAPI","path","useRouteMatch","patientData","setPatientData","patientLoading","setPatientLoading","address","EyeOutlined","listAllPatient","patientResults","AppointmentPage","mode","locale","getServicesAPI","getServiceDetailsAPI","addServiceAPI","updateServiceAPI","deleteServiceAPI","ServiceForm","defaultService","serviceDetail","setServiceDetail","getServiceDetail","ServicePage","services","setServices","fetchingServices","setFetchingServices","selectedService","setSelectedService","serviceForm","service","getServices","getWorkingHoursAPI","updateWorkingHourAPI","weekday","isClosed","is_closed","WorkingHourPage","workingHours","setWorkingHours","setLoading","checked","handleWorkingHourChange","getWorkingHours","workingHoursResponse","sort","b","wh","RoomForm","defaultRoom","RoomPage","roomForm","getUsersAPI","qs","getUserDetailsAPI","addUserAPI","phone","role_id","format","updateUserAPI","deleteUserAPI","blockUserAPI","userId","unblockUserAPI","ROLES","display","ROLES_LIST","UserForm","defaultUser","userDetail","setUserDetail","getUserDetail","moment","rules","required","message","Group","Circle","classes","classnames","styles","circle","color","AdminAccountPage","urlSearchParams","URLSearchParams","currentPageOnURL","page","setPage","users","setUsers","fetchingUsers","setFetchingUsers","selectedUser","setSelectedUser","userForm","is_verified_email","is_verified_phone","handleBlockUnblock","is_active","danger","LockOutlined","UnlockOutlined","getUsers","defaultCurrent","current","pageSize","total","count","AdminSettingPage","withPrivateRoute","Child","roles","userRole","isValidRole","jwtDecode","error","Header","Layout","CustomHeader","ghost","LogoutOutlined","Modal","confirm","ExclamationCircleOutlined","content","Sider","Content","SubMenu","Menu","match","location","borderRight","selectedKeys","DashboardOutlined","MedicineBoxOutlined","BugOutlined","NotificationOutlined","ContainerOutlined","IdcardOutlined","CalendarOutlined","DollarOutlined","ClockCircleOutlined","AppstoreOutlined","UserOutlined","SettingOutlined","padding","margin","minHeight","exact","VisitLivingFunctionForm","currentValues","setBmi","heightStr","getFieldValue","weightStr","Math","pow","gutter","field","toFixed","SaveOutlined","categoryId","List","Select","VisitDiseaseForm","localCategories","setLocalCategories","diseaseLoading","setDiseaseLoading","adminGetDiseasesAPI","diseaseResponse","handleCatSearch","filterArr","handleCatChange","getDiseasesByCategory","initialValues","fields","add","align","fieldKey","showSearch","onSearch","MinusCircleOutlined","VisitServiceForm","VisitDrugForm","instructions","drugLoading","setDrugLoading","adminGetDrugsAPI","drugResponse","handleCategoryChange","getDrugsByCategory","minWidth","VisitImagesForm","diseaseCategories","setDiseaseCategories","drugCategories","setDrugCategories","adminGetDiseaseCategoryAPI","diseaseCategoryResponse","diseaseCategoriesData","adminGetServicesAPI","servicesResponse","servicesData","adminGetDrugCategoryAPI","drugCategoryResponse","drugCategoriesData","adminGetDrugInstructionsAPI","drugInsResponse","drugInsData","onBack","goBack","v","TabPane","tab","span","defaultActiveKey","Panel","header","visitId","prevValue","find","finalList","success","handleSaveLivingFunctions","handleSaveDiseases","handleSaveServices","handleSaveDrugs","handleFinishExamination","ProfilePage","Descriptions","PatientDetails","setPatient","setEMRLoading","getPatientDetails","patientResponse","getPatientEMRs","EMRResponse","colon","ProfileOutlined","PatientForm","ReceivePage","isCreatingVisit","setCreatingVisit","patientForm","renderMenu","handleCreateVisit","overlay","overlayStyle","trigger","listAllPatients","createVisitResponse","extra","Search","EmailIcon","enableBackground","VerifyPage","setSuccess","setError","isValidToken","isValid","test","verifyEmail","showIcon","App","interceptors","request","use","config","method","headers","reject","res","destroy","originalRequest","status","_retry","AuthService","refreshResponse","newToken","resolve","then","catch","errorMessage","fetchProfile","refresh","newTokenReponse","checkRefresh","AdminLayout","PhysicianLayout","ReceptionistLayout","initialState","rootReducer","combineReducers","middlewares","thunk","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","Boolean","hostname","ReactDOM","viVN","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.29c8a7a7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"circle\":\"Circle_circle__3fC-i\",\"circle--success\":\"Circle_circle--success__1IfvS\"};","import React from 'react';\n\nconst LoginIcon = () => (\n  <svg width=\"50\" height=\"50\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512.002 512.002\" fill=\"currentColor\" xmlSpace=\"preserve\">\n    <g>\n      <g>\n        <g>\n          <circle cx=\"338\" cy=\"346.001\" r=\"20\" />\n          <path d=\"M238,472.001H80c-22.056,0-40-17.944-40-40v-164c0-22.056,17.944-40,40-40h288c22.056,0,40,17.944,40,40v40     c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20v-40c0-44.112-35.888-80-80-80h-24.037v-70.534     c0-64.771-53.832-117.466-120-117.466s-120,52.695-120,117.466v70.534H80c-44.112,0-80,35.888-80,80v164     c0,44.112,35.888,80,80,80h158c11.046,0,20-8.954,20-20S249.046,472.001,238,472.001z M143.963,117.467     c0-42.715,35.888-77.466,80-77.466s80,34.751,80,77.466v70.534h-160V117.467z\" />\n          <path d=\"M503.643,325.739c-8.982-6.431-21.477-4.362-27.904,4.62l-98.581,137.7c-2.692,3.122-6.066,3.796-7.874,3.916     c-1.854,0.123-5.424-0.112-8.567-3.061l-63.708-62.171c-7.906-7.716-20.568-7.559-28.282,0.345     c-7.715,7.905-7.561,20.567,0.345,28.282l63.82,62.281c0.06,0.058,0.119,0.116,0.18,0.173C342.639,506.933,355.41,512,368.55,512     c1.129,0,2.261-0.037,3.393-0.113c14.314-0.954,27.679-7.915,36.666-19.097c0.232-0.29,0.456-0.585,0.673-0.887l98.981-138.26     C514.692,344.662,512.624,332.168,503.643,325.739z\" />\n          <circle cx=\"262\" cy=\"346.001\" r=\"20\" />\n          <circle cx=\"112\" cy=\"346.001\" r=\"20\" />\n          <circle cx=\"187\" cy=\"346.001\" r=\"20\" />\n        </g>\n      </g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n  </svg>\n)\n\nexport default LoginIcon;","export const LOGIN_PENDING = \"LOGIN_PENDING\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\n\nexport const GET_PROFILE_PENDING = \"GET_PROFILE_PENDING\";\nexport const GET_PROFILE_SUCCESS = \"GET_PROFILE_SUCCESS\";\nexport const GET_PROFILE_FAILURE = \"GET_PROFILE_FAILURE\";\n\nexport const LOGOUT = \"LOGOUT\";","export const API_URL = 'https://emr-2020.wl.r.appspot.com/api';","import { API_URL } from \"constant/apiUrl\";\nimport axios from 'axios';\n\n\nconst endpointPrefix = `${API_URL}/auth`;\n\n/**\n * Login to system\n * @param email\n * @param password\n */\nexport function login(email, password) {\n  const url = `${endpointPrefix}/login/`;\n  return axios.post(url, {\n    email: email,\n    password: password\n  });\n}\n\n/**\n * This function is used to get new access token from refresh token\n * when current access token is expired\n * @param refreshToken Refresh token from last login\n */\nexport function refreshToken(refreshToken) {\n  const url = `${endpointPrefix}/refresh-token/`;\n  return axios.post(url, {\n    refresh_token: refreshToken\n  });\n}\n\n\nexport function verifyEmailAPI(token) {\n  const url = `${endpointPrefix}/verify-email/${token}/`;\n  return axios.get(url);\n}","import { API_URL } from \"constant/apiUrl\";\nimport axios from 'axios';\n\nconst endpointPrefix = `${API_URL}/user`;\n\n/**\n* Get user profile\n* @param token Access token\n*/\nexport function getProfile() {\n  const url = `${endpointPrefix}/profile/`;\n  return axios.get(url);\n}","import * as actionTypes from '../actionTypes';\nimport { getProfile } from 'services/user/user.service';\n\nfunction getProfilePending() {\n  return {\n    type: actionTypes.GET_PROFILE_PENDING\n  }\n}\n\nfunction getProfileSuccess(user) {\n  return {\n    type: actionTypes.GET_PROFILE_SUCCESS,\n    payload: user\n  }\n}\n\nfunction getProfileFailure() {\n  return {\n    type: actionTypes.GET_PROFILE_FAILURE\n  }\n}\n\nexport function getProfileAction() {\n  return async dispatch => {\n    try {\n      dispatch(getProfilePending());\n      const profileRes = await getProfile();\n      const user = profileRes.data;\n      dispatch(getProfileSuccess(user));\n    } catch(error) {\n      console.log(error);\n      dispatch(getProfileFailure());\n    }\n  }\n}\n\nexport function removeUserAction() {\n  return {\n    type: actionTypes.LOGOUT\n  }\n}","import * as actionTypes from '../actionTypes';\nimport { login } from 'services/auth/auth.service';\nimport Cookie from 'js-cookie';\nimport { getProfileAction, removeUserAction } from './user.action';\n\nfunction loginPending() {\n  return {\n    type: actionTypes.LOGIN_PENDING\n  }\n}\n\nfunction loginSuccess() {\n  return {\n    type: actionTypes.LOGIN_SUCCESS,\n  }\n}\n\nfunction loginFailure() {\n  return {\n    type: actionTypes.LOGIN_FAILURE\n  }\n}\n\nexport function loginAction(email, password) {\n  return async dispatch => {\n    try {\n      dispatch(loginPending());\n      const loginRes = await login(email, password);\n      const loginData = loginRes.data;\n\n      const accessToken = loginData.access_token;\n      const refreshToken = loginData.refresh_token;\n      Cookie.set('EMR_token', accessToken, { expires: 3 / 24 }); // 3 hours\n      Cookie.set('EMR_refresh', refreshToken, { expires: 7 }); // 7 days\n      dispatch(loginSuccess());\n      dispatch(getProfileAction());\n    } catch (error) {\n      dispatch(loginFailure());\n    }\n  }\n}\n\nexport function logoutAction() {\n  Cookie.remove('EMR_token');\n  Cookie.remove('EMR_refresh');\n\n  return dispatch => {\n    dispatch(removeUserAction());\n  }\n}","import React, { useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Form, Input, Button } from 'antd';\nimport Icon from '@ant-design/icons';\nimport LoginIcon from 'components/Icons/LoginIcon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loginAction } from 'store/actions/auth.action';\nimport { getRedirectPath } from 'utils/routing';\n\nconst LoginForm = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const authState = useSelector(state => state.authState);\n  const userState = useSelector(state => state.userState);\n  const user = userState.user;\n\n  function handleSubmit(values) {\n    dispatch(loginAction(values.email, values.password));\n  }\n\n  useEffect(() => {\n    if (user && user.role) {\n      const redirectPath = getRedirectPath(user.role);\n      console.log(redirectPath);\n      history.replace(redirectPath);\n    }\n  }, [user, history]);\n\n  return (\n    <Form\n      className=\"auth\"\n      layout=\"vertical\"\n      autoComplete=\"off\"\n      onFinish={handleSubmit}>\n\n      <div className=\"auth__header text-center\">\n        <Icon component={LoginIcon} />\n        <h1 className=\"text-3xl\">Đăng nhập</h1>\n      </div>\n\n      <Form.Item name=\"email\">\n        <Input type=\"email\" placeholder=\"Email\" />\n      </Form.Item>\n\n      <Form.Item name=\"password\" className=\"m-0\">\n        <Input.Password placeholder=\"Mật khẩu\" />\n        {/* <Button type=\"link\"> */}\n        {/* </Button> */}\n      </Form.Item>\n      <Link className=\"block mt-2 mb-6\" to=\"/forgot-password\">Quên mật khẩu</Link>\n\n      <Form.Item>\n        <Button loading={authState.loginLoading || userState.getProfileLoading} block type=\"primary\" size=\"large\" htmlType=\"submit\">Đăng nhập</Button>\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default LoginForm;","export function getRedirectPath(role) {\n  if (!role) return \"/login\";\n\n  switch (role.id) {\n    case 1:\n      return \"/admin\";\n    case 2:\n      return \"/physician\";\n    case 3:\n      return \"/receptionist\";\n    case 4:\n      return \"/patient\";\n    default:\n      return \"\";\n  }\n}","import React from 'react';\nimport LoginForm from 'forms/LoginForm/LoginForm';\n\nconst LoginPage = (props) => {\n  return (\n    <main className=\"login-page\">\n      <LoginForm />\n    </main>\n  )\n}\n\nexport default LoginPage;","import React from 'react';\n\nconst AdminDashboard = () => {\n  return (\n    <div>Admin dashboard</div>\n  )\n}\n\nexport default AdminDashboard;","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst DrugCategoryForm = props => {\n  const { form, onFinish, defaultCategory } = props;\n\n  return (\n    <Form\n      layout=\"vertical\"\n      form={form}\n      onFinish={onFinish}>\n      <Form.Item label=\"Loại thuốc\" name=\"name\" initialValue={defaultCategory?.name}>\n        <Input autoFocus />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default DrugCategoryForm;","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/admin/manage-drug-category`;\n\nexport function getDrugCategoryAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}\n\nexport function addDrugCategoryAPI(name) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, { name: name });\n}\n\nexport function updateDrugCategoryAPI(id, name) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    name: name\n  })\n}\n\nexport function deleteDrugCategoryAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","export const formActions = {\n  CREATE: 'CREATE',\n  UPDATE: 'UPDATE'\n}","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport DrugCategoryForm from 'forms/DrugCategoryForm/DrugCategoryForm';\nimport { addDrugCategoryAPI, deleteDrugCategoryAPI, getDrugCategoryAPI, updateDrugCategoryAPI } from 'services/admin/drug-category.service';\nimport { formActions } from 'constant/formActions';\n\nconst DrugCategoryPage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [fetchingCategories, setFetchingCategories] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [drugCategoryForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Tên',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getDrugCategories() {\n    try {\n      setFetchingCategories(true);\n      const response = await getDrugCategoryAPI();\n      setCategories(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingCategories(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await drugCategoryForm.validateFields();\n      if (action === formActions.CREATE) {\n        await addDrugCategoryAPI(values.name);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateDrugCategoryAPI(selectedCategory.id, values.name);\n      }\n\n      getDrugCategories();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(category) {\n    setAction(formActions.UPDATE);\n    setSelectedCategory(category);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(unit) {\n    try {\n      await deleteDrugCategoryAPI(unit.id);\n      getDrugCategories();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    drugCategoryForm.resetFields();\n    setSelectedCategory(null);\n  }\n\n  useEffect(() => {\n    getDrugCategories();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý loại thuốc</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={categories}\n        pagination={false}\n        loading={fetchingCategories} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm loại thuốc' : 'Cập nhật loại thuốc'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <DrugCategoryForm onFinish={handleFormSubmit} form={drugCategoryForm} defaultCategory={selectedCategory} />\n      </Modal>\n    </>\n  )\n}\n\nexport default DrugCategoryPage;","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst DrugUnitForm = props => {\n  const { form, onFinish, defaultUnit } = props;\n\n  return (\n    <Form\n      layout=\"vertical\"\n      form={form}\n      onFinish={onFinish}>\n      <Form.Item label=\"Đơn vị tính\" name=\"name\" initialValue={defaultUnit?.name}>\n        <Input autoFocus />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default DrugUnitForm;","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/admin/manage-drug-unit`;\n\nexport function getDrugUnitsAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}\n\nexport function addDrugUnitAPI(name) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, { name: name });\n}\n\nexport function updateDrugUnitAPI(id, name) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    name: name\n  })\n}\n\nexport function deleteDrugUnitAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport DrugUnitForm from 'forms/DrugUnitForm/DrugUnitForm';\nimport { getDrugUnitsAPI, addDrugUnitAPI, updateDrugUnitAPI, deleteDrugUnitAPI } from 'services/admin/drug-unit.service';\nimport { formActions } from 'constant/formActions';\n\nconst DrugUnitPage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [drugUnits, setDrugUnits] = useState([]);\n  const [fetchingDrugUnits, setFetchingDrugUnits] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedUnit, setSelectedUnit] = useState(null);\n  const [drugUnitForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Đơn vị tính',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getDrugUnits() {\n    try {\n      setFetchingDrugUnits(true);\n      const response = await getDrugUnitsAPI();\n      setDrugUnits(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingDrugUnits(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await drugUnitForm.validateFields();\n      if (action === formActions.CREATE) {\n        await addDrugUnitAPI(values.name);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateDrugUnitAPI(selectedUnit.id, values.name);\n      }\n\n      getDrugUnits();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(unit) {\n    setAction(formActions.UPDATE);\n    setSelectedUnit(unit);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(unit) {\n    try {\n      await deleteDrugUnitAPI(unit.id);\n      getDrugUnits();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    drugUnitForm.resetFields();\n    setSelectedUnit(null);\n  }\n\n  useEffect(() => {\n    getDrugUnits();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý đơn vị tính</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={drugUnits}\n        loading={fetchingDrugUnits}\n        pagination={false} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm đơn vị tính' : 'Cập nhật đơn vị tính'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <DrugUnitForm onFinish={handleFormSubmit} form={drugUnitForm} defaultUnit={selectedUnit} />\n      </Modal>\n    </>\n  )\n}\n\nexport default DrugUnitPage;","export function getQueryString(queryObj) {\n  if (!queryObj) return \"\";\n  return Object.keys(queryObj).map(key => `${key}=${queryObj[key]}`).join('&');\n}","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\nimport { getQueryString } from 'utils/string';\n\nconst endpointPrefix = `${API_URL}/admin/manage-drug`;\n\nexport function getDrugsAPI(params) {\n  const url = `${endpointPrefix}/`;\n\n  if (params) {\n    return axios.get(`${url}?${getQueryString(params)}`);\n  }\n  return axios.get(url);\n}\n\nexport function getDrugDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}\n\nexport function addDrugAPI({ code, name, drug_category, price, drug_unit }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, {\n    code,\n    name,\n    drug_category,\n    price: Number(price),\n    drug_unit\n  });\n}\n\nexport function updateDrugAPI(id, { code, name, drug_category, price, drug_unit }) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    code,\n    name,\n    drug_category,\n    price: Number(price),\n    drug_unit\n  });\n}\n\nexport function deleteDrugAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Form, Input, Select, Spin } from 'antd';\nimport { getDrugCategoryAPI } from 'services/admin/drug-category.service';\nimport { getDrugUnitsAPI } from 'services/admin/drug-unit.service';\nimport { getDrugDetailsAPI } from 'services/admin/drug.service';\n\nconst DrugForm = props => {\n  const { form, onFinish, defaultDrug } = props;\n\n  const [categories, setCategories] = useState([]);\n  const [units, setUnits] = useState([]);\n  const [drugDetail, setDrugDetail] = useState(null);\n  const [catLoading, setCatLoading] = useState(false);\n  const [unitLoading, setUnitLoading] = useState(false);\n  const [detailLoading, setDetailLoading] = useState(false);\n\n  async function getDrugCategories() {\n    try {\n      setCatLoading(true);\n      const catResponse = await getDrugCategoryAPI();\n      setCategories(catResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setCatLoading(false);\n    }\n  }\n\n  async function getDrugUnits() {\n    try {\n      setUnitLoading(true);\n      const unitResponse = await getDrugUnitsAPI();\n      setUnits(unitResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setUnitLoading(false);\n    }\n  }\n\n  async function getDrugDetail(id) {\n    try {\n      setDetailLoading(true);\n      const detailResponse = await getDrugDetailsAPI(id);\n      const drugDetail = detailResponse.data;\n      setDrugDetail(drugDetail);\n      setCategories(prevCats => {\n        const index = prevCats.findIndex(cat => cat.id === defaultDrug.drug_category);\n        if (index > -1) {\n          prevCats[index] = drugDetail.drug_category;\n          return prevCats;\n        } else {\n          return [...[drugDetail.drug_category], ...prevCats];\n        }\n      });\n      setUnits(prevUnits => {\n        const index = prevUnits.findIndex(u => u.id === defaultDrug.drug_unit);\n        if (index > -1) {\n          prevUnits[index] = drugDetail.drug_unit;\n          return prevUnits;\n        } else {\n          return [...[drugDetail.drug_unit], ...prevUnits];\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setDetailLoading(false);\n    }\n  }\n\n  async function getData() {\n    if (defaultDrug?.id) {\n      await Promise.all([\n        getDrugDetail(defaultDrug.id),\n        getDrugCategories(),\n        getDrugUnits()\n      ]);\n\n    } else {\n      await Promise.all([\n        getDrugCategories(),\n        getDrugUnits()\n      ])\n    }\n\n  }\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  useEffect(() => {\n    if (drugDetail) {\n      form.setFieldsValue({\n        code: drugDetail.code,\n        name: drugDetail.name,\n        price: drugDetail.price,\n        drug_category: drugDetail.drug_category.id,\n        drug_unit: drugDetail.drug_unit.id\n      });\n    }\n  }, [drugDetail, defaultDrug, form]);\n\n  return (\n    <Spin spinning={detailLoading}>\n      <Form\n        layout=\"vertical\"\n        form={form}\n        onFinish={onFinish}>\n        <Form.Item label=\"Mã thuốc\" name=\"code\" initialValue={drugDetail?.code}>\n          <Input />\n        </Form.Item>\n\n        <Form.Item label=\"Tên thuốc\" name=\"name\" initialValue={drugDetail?.name}>\n          <Input />\n        </Form.Item>\n\n        <Form.Item label=\"Giá\" name=\"price\" initialValue={drugDetail?.price}>\n          <Input type=\"number\" suffix=\"VNĐ\" />\n        </Form.Item>\n\n        <Form.Item label=\"Loại thuốc\" name=\"drug_category\" initialValue={drugDetail?.drug_category.id}>\n          <Select loading={catLoading}>\n            {\n              categories.map(cat => (\n                <Select.Option key={cat.id} value={cat.id}>{cat.name}</Select.Option>\n              ))\n            }\n          </Select>\n        </Form.Item>\n\n        <Form.Item label=\"Đơn vị tính\" name=\"drug_unit\" initialValue={drugDetail?.drug_unit.id}>\n          <Select loading={unitLoading}>\n            {\n              units.map(cat => (\n                <Select.Option key={cat.id} value={cat.id}>{cat.name}</Select.Option>\n              ))\n            }\n          </Select>\n        </Form.Item>\n      </Form>\n    </Spin>\n  )\n}\n\nexport default DrugForm;","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport DrugForm from 'forms/DrugForm/DrugForm';\nimport { getDrugsAPI, addDrugAPI, updateDrugAPI, deleteDrugAPI } from 'services/admin/drug.service';\nimport { formActions } from 'constant/formActions';\nimport NumberFormat from 'react-number-format';\n\nconst DrugPage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [drugs, setDrugs] = useState();\n  const [fetchingDrugs, setFetchingDrugs] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedDrug, setSelectedDrug] = useState(null);\n  const [drugForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Mã thuốc',\n      key: 'code',\n      dataIndex: 'code'\n    },\n    {\n      title: 'Tên thuốc',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Giá',\n      key: 'price',\n      dataIndex: 'price',\n      render: (text, record, index) => (<NumberFormat thousandSeparator=\" \" suffix=\" VNĐ\" value={text} displayType=\"text\" />)\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getDrugs() {\n    try {\n      setFetchingDrugs(true);\n      const response = await getDrugsAPI();\n      setDrugs(response.data.results);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingDrugs(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await drugForm.validateFields();\n      const data = {\n        code: values.code,\n        name: values.name,\n        price: values.price,\n        drug_category: values.drug_category,\n        drug_unit: values.drug_unit\n      }\n      if (action === formActions.CREATE) {\n        await addDrugAPI(data);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateDrugAPI(selectedDrug.id, data);\n      }\n\n      getDrugs();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(drug) {\n    setAction(formActions.UPDATE);\n    setSelectedDrug(drug);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(drug) {\n    try {\n      await deleteDrugAPI(drug.id);\n      getDrugs();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    drugForm.resetFields();\n    setSelectedDrug(null);\n  }\n\n  useEffect(() => {\n    getDrugs();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý thuốc</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={drugs}\n        loading={fetchingDrugs}\n        pagination={false} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm thuốc' : 'Cập nhật thuốc'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <DrugForm onFinish={handleFormSubmit} form={drugForm} defaultDrug={selectedDrug} />\n      </Modal>\n    </>\n  )\n}\n\nexport default DrugPage;","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst DrugInstructionForm = props => {\n  const { form, onFinish, defaultInstruction } = props;\n\n  return (\n    <Form\n      layout=\"vertical\"\n      form={form}\n      onFinish={onFinish}>\n      <Form.Item label=\"Hướng dẫn sử dụng\" name=\"instruction\" initialValue={defaultInstruction?.instruction}>\n        <Input autoFocus />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default DrugInstructionForm;","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/admin/manage-drug-instruction`;\n\nexport function getDrugInstructionsAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function addDrugInstructionAPI(instruction) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, { instruction: instruction });\n}\n\nexport function updateDrugInstructionAPI(id, instruction) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    instruction: instruction\n  })\n}\n\nexport function deleteDrugInstructionAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport DrugInstructionForm from 'forms/DrugInstructionForm/DrugInstructionForm';\nimport { getDrugInstructionsAPI, addDrugInstructionAPI, updateDrugInstructionAPI, deleteDrugInstructionAPI } from 'services/admin/drug-instruction.service';\nimport { formActions } from 'constant/formActions';\n\nconst DrugInstructionPage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [drugInstructions, setDrugInstructions] = useState([]);\n  const [fetchingDrugInstructions, setFetchingDrugInstructions] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedInstruction, setSelectedInstruction] = useState(null);\n  const [drugInstructionForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Hướng dẫn sử dụng',\n      key: 'instruction',\n      dataIndex: 'instruction'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getDrugInstructions() {\n    try {\n      setFetchingDrugInstructions(true);\n      const response = await getDrugInstructionsAPI();\n      setDrugInstructions(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingDrugInstructions(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await drugInstructionForm.validateFields();\n      if (action === formActions.CREATE) {\n        await addDrugInstructionAPI(values.instruction);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateDrugInstructionAPI(selectedInstruction.id, values.instruction);\n      }\n\n      getDrugInstructions();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(ins) {\n    setAction(formActions.UPDATE);\n    setSelectedInstruction(ins);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(unit) {\n    try {\n      await deleteDrugInstructionAPI(unit.id);\n      getDrugInstructions();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    drugInstructionForm.resetFields();\n    setSelectedInstruction(null);\n  }\n\n  useEffect(() => {\n    getDrugInstructions();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý hướng dẫn sử dụng</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={drugInstructions}\n        loading={fetchingDrugInstructions}\n        pagination={false} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm hướng dẫn sử dụng' : 'Cập nhật hướng dẫn sử dụng'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <DrugInstructionForm onFinish={handleFormSubmit} form={drugInstructionForm} defaultInstruction={selectedInstruction} />\n      </Modal>\n    </>\n  )\n}\n\nexport default DrugInstructionPage;","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst DiseaseCategoryForm = props => {\n  const { form, onFinish, defaultCategory } = props;\n\n  return (\n    <Form\n      layout=\"vertical\"\n      form={form}\n      onFinish={onFinish}>\n      <Form.Item label=\"Loại bệnh\" name=\"name\" initialValue={defaultCategory?.name}>\n        <Input autoFocus />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default DiseaseCategoryForm;","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/admin/manage-disease-category`;\n\nexport function getDiseaseCategoryAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}\n\nexport function addDiseaseCategoryAPI(name) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, { name: name });\n}\n\nexport function updateDiseaseCategoryAPI(id, name) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    name: name\n  })\n}\n\nexport function deleteDiseaseCategoryAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport DiseaseCategoryForm from 'forms/DiseaseCategoryForm/DiseaseCategoryForm';\nimport { addDiseaseCategoryAPI, deleteDiseaseCategoryAPI, getDiseaseCategoryAPI, updateDiseaseCategoryAPI } from 'services/admin/disease-category.service';\nimport { formActions } from 'constant/formActions';\n\nconst DiseaseCategoryPage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [fetchingCategories, setFetchingCategories] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [diseaseCategoryForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Tên',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getDiseaseCategories() {\n    try {\n      setFetchingCategories(true);\n      const response = await getDiseaseCategoryAPI();\n      setCategories(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingCategories(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await diseaseCategoryForm.validateFields();\n      if (action === formActions.CREATE) {\n        await addDiseaseCategoryAPI(values.name);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateDiseaseCategoryAPI(selectedCategory.id, values.name);\n      }\n\n      getDiseaseCategories();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(category) {\n    setAction(formActions.UPDATE);\n    setSelectedCategory(category);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(unit) {\n    try {\n      await deleteDiseaseCategoryAPI(unit.id);\n      getDiseaseCategories();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    diseaseCategoryForm.resetFields();\n    setSelectedCategory(null);\n  }\n\n  useEffect(() => {\n    getDiseaseCategories();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý loại bệnh</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={categories}\n        \n        loading={fetchingCategories} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm loại bệnh' : 'Cập nhật loại bệnh'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <DiseaseCategoryForm onFinish={handleFormSubmit} form={diseaseCategoryForm} defaultCategory={selectedCategory} />\n      </Modal>\n    </>\n  )\n}\n\nexport default DiseaseCategoryPage;","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\n\nconst endpointPrefix = `${API_URL}/admin/manage-disease`;\n\nexport function getDiseasesAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function getDiseaseDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}\n\nexport function addDiseaseAPI({ code, name, disease_category }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, {\n    code,\n    name,\n    disease_category\n  });\n}\n\nexport function updateDiseaseAPI(id, { code, name, disease_category }) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    code,\n    name,\n    disease_category\n  });\n}\n\nexport function deleteDiseaseAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Form, Input, Select, Spin } from 'antd';\nimport { getDiseaseCategoryAPI } from 'services/admin/disease-category.service';\nimport { getDiseaseDetailsAPI } from 'services/admin/disease.service';\n\nconst DiseaseForm = props => {\n  const { form, onFinish, defaultDisease } = props;\n\n  const [categories, setCategories] = useState([]);\n  const [diseaseDetail, setDiseaseDetail] = useState(null);\n  const [catLoading, setCatLoading] = useState(false);\n  const [detailLoading, setDetailLoading] = useState(false);\n\n  async function getDiseaseCategories() {\n    try {\n      setCatLoading(true);\n      const catResponse = await getDiseaseCategoryAPI();\n      setCategories(catResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setCatLoading(false);\n    }\n  }\n\n  async function getDiseaseDetail(id) {\n    try {\n      setDetailLoading(true);\n      const detailResponse = await getDiseaseDetailsAPI(id);\n      const diseaseDetail = detailResponse.data;\n      setDiseaseDetail(diseaseDetail);\n      setCategories(prevCats => {\n        const index = prevCats.findIndex(cat => cat.id === defaultDisease.disease_category);\n        if (index > -1) {\n          prevCats[index] = diseaseDetail.disease_category;\n          return prevCats;\n        } else {\n          return [...[diseaseDetail.disease_category], ...prevCats];\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setDetailLoading(false);\n    }\n  }\n\n  async function getData() {\n    if (defaultDisease?.id) {\n      await Promise.all([\n        getDiseaseDetail(defaultDisease.id),\n        getDiseaseCategories(),\n      ]);\n\n    } else {\n      await Promise.all([\n        getDiseaseCategories(),\n      ])\n    }\n\n  }\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  useEffect(() => {\n    if (diseaseDetail) {\n      form.setFieldsValue({\n        code: diseaseDetail.code,\n        name: diseaseDetail.name,\n        disease_category: diseaseDetail.disease_category.id,\n      });\n    }\n  }, [diseaseDetail, defaultDisease, form]);\n\n  return (\n    <Spin spinning={detailLoading}>\n      <Form\n        layout=\"vertical\"\n        form={form}\n        onFinish={onFinish}>\n        <Form.Item label=\"Mã bệnh\" name=\"code\" initialValue={diseaseDetail?.code}>\n          <Input />\n        </Form.Item>\n\n        <Form.Item label=\"Tên bệnh\" name=\"name\" initialValue={diseaseDetail?.name}>\n          <Input />\n        </Form.Item>\n\n        <Form.Item label=\"Loại bệnh\" name=\"disease_category\" initialValue={diseaseDetail?.disease_category.id}>\n          <Select loading={catLoading}>\n            {\n              categories.map(cat => (\n                <Select.Option key={cat.id} value={cat.id}>{cat.name}</Select.Option>\n              ))\n            }\n          </Select>\n        </Form.Item>\n      </Form>\n    </Spin>\n  )\n}\n\nexport default DiseaseForm;","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport DiseaseForm from 'forms/DiseaseForm/DiseaseForm';\nimport { getDiseasesAPI, addDiseaseAPI, updateDiseaseAPI, deleteDiseaseAPI } from 'services/admin/disease.service';\nimport { formActions } from 'constant/formActions';\n\nconst DiseasePage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [diseases, setDiseases] = useState();\n  const [fetchingDiseases, setFetchingDiseases] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedDisease, setSelectedDisease] = useState(null);\n  const [diseaseForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Mã bệnh',\n      key: 'code',\n      dataIndex: 'code'\n    },\n    {\n      title: 'Tên bệnh',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getDiseases() {\n    try {\n      setFetchingDiseases(true);\n      const response = await getDiseasesAPI();\n      setDiseases(response.data.results);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingDiseases(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await diseaseForm.validateFields();\n      const data = {\n        code: values.code,\n        name: values.name,\n        disease_category: values.disease_category,\n      }\n      if (action === formActions.CREATE) {\n        await addDiseaseAPI(data);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateDiseaseAPI(selectedDisease.id, data);\n      }\n\n      getDiseases();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(disease) {\n    setAction(formActions.UPDATE);\n    setSelectedDisease(disease);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(disease) {\n    try {\n      await deleteDiseaseAPI(disease.id);\n      getDiseases();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    diseaseForm.resetFields();\n    setSelectedDisease(null);\n  }\n\n  useEffect(() => {\n    getDiseases();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý bệnh</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={diseases}\n        loading={fetchingDiseases} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm bệnh' : 'Cập nhật bệnh'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <DiseaseForm onFinish={handleFormSubmit} form={diseaseForm} defaultDisease={selectedDisease} />\n      </Modal>\n    </>\n  )\n}\n\nexport default DiseasePage;","import React from 'react';\n\nconst NotificationPage = () => {\n  return (\n    <div>Notification Page</div>\n  )\n}\n\nexport default NotificationPage;","export function removeDuplicates(myArr, prop) {\n  return myArr.filter((obj, pos, arr) => {\n    return arr.map(mapObj => mapObj[prop]).indexOf(obj[prop]) === pos;\n  });\n}","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/user/room`;\n\nexport function getRoomAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function getRoomDetailsAPI(roomId) {\n  const url = `${endpointPrefix}/${roomId}/`;\n  return axios.get(url);\n}","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/admin/manage-room`;\n\nexport function getRoomAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function addRoomAPI({ number, name }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, { number: Number(number), name });\n}\n\nexport function updateRoomAPI(id, { name, number }) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    number: Number(number),\n    name\n  })\n}\n\nexport function deleteRoomAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\n\nconst endpointPrefix = `${API_URL}/user/visit`;\n\nexport function getVisitDataAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function createVisitAPI({ patientId, roomId }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, {\n    room_id: roomId,\n    patient_id: patientId\n  })\n}","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\n\nconst endpointPrefix = `${API_URL}/admin/manage-visit`;\n\nexport function getVisitDataAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function createVisitAPI({ patientId, roomId }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, {\n    room_id: roomId,\n    patient_id: patientId\n  })\n}","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\nimport { getQueryString } from 'utils/string';\n\nconst endpointPrefix = `${API_URL}/user/emr`;\n\nexport function listEMRAPI(query) {\n  const url = `${endpointPrefix}/`;\n  if (query) {\n    return axios.get(`${url}?${getQueryString(query)}`);\n  }\n\n  return axios.get(url);\n}\n\nexport function addEMRAPI(patientId, physicianId) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, {\n    patient_id: patientId,\n    physician_id: physicianId\n  })\n}","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Select, Empty, Table, Button } from 'antd';\nimport { connect } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { removeDuplicates } from 'utils/array';\n\n// APIs\nimport { getRoomAPI } from 'services/user/room.service';\nimport { getRoomAPI as adminGetRoomAPI } from 'services/admin/room.service';\nimport { getVisitDataAPI } from 'services/user/visit.service';\nimport { getVisitDataAPI as adminGetVisitDataAPI } from 'services/admin/visit.service';\nimport { addEMRAPI } from 'services/user/emr.service';\n\n\nconst VisitPage = props => {\n  const user = props.user;\n  const { pathname } = useLocation();\n\n  const history = useHistory();\n  const [rooms, setRooms] = useState([]);\n  const [roomLoading, setRoomLoading] = useState(false);\n  const [visitData, setVisitData] = useState(null);\n  const [visitLoading, setVisitLoading] = useState(false);\n  const [createEMRLoading, setCreateEMRLoading] = useState([]);\n\n  const [selectedRoom, setSelectedRoom] = useState(\"\");\n  const [listEMR, setListEMR] = useState([]);\n\n  const visitList = visitData?.results.filter(visit => {\n    const createdAt = new Date(visit.created_at);\n    const today = new Date();\n    const isToday = createdAt.getDate() === today.getDate() &&\n      createdAt.getMonth() === today.getMonth() &&\n      createdAt.getFullYear() === today.getFullYear();\n    return (isToday && visit.room.id === selectedRoom)\n  });\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (_, __, index) => index + 1\n    },\n    {\n      title: 'Họ và tên',\n      key: 'fullname',\n      render: (_, record) => record.patient.first_name + \" \" + record.patient.last_name\n    },\n    {\n      title: 'Giới tính',\n      key: 'gender',\n      render: (_, record) => record.patient.gender\n    },\n    {\n      ken: 'action',\n      render: (_, record) => <Button onClick={() => handlePatientClick(record)} loading={createEMRLoading.includes(record.id)}>Khám bệnh</Button>\n    }\n  ]\n\n  async function getRooms() {\n    try {\n      setRoomLoading(true);\n      let roomResponse;\n      if (user.role.name === \"admin\") {\n        roomResponse = await adminGetRoomAPI();\n      } else if (user.role.name === \"physician\" || user?.role?.name === \"receptionist\") {\n        roomResponse = await getRoomAPI();\n      }\n      setRooms(roomResponse.data);\n\n      const prevSelected = localStorage.getItem(\"selectedRoom\");\n      setSelectedRoom(prevSelected);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setRoomLoading(false);\n    }\n  }\n\n  async function getVisitData() {\n    try {\n      let visitDataResponse;\n      setVisitLoading(true);\n      if (user.role.name === \"admin\") {\n        visitDataResponse = await adminGetVisitDataAPI();\n      } else {\n        visitDataResponse = await getVisitDataAPI()\n      }\n      const visitData = visitDataResponse.data;\n      setVisitData(visitData);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setVisitLoading(false);\n    }\n  }\n\n  async function getInitialData() {\n    await Promise.all([\n      getVisitData(),\n      getRooms(),\n    ]);\n  }\n\n  useEffect(() => {\n    if (user) {\n      getInitialData();\n    }\n\n    const localListEMRStr = localStorage.getItem(\"listEMR\");\n    const localListEMRObj = JSON.parse(localListEMRStr);\n    if (localListEMRObj) {\n      setListEMR(localListEMRObj);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (selectedRoom) {\n      localStorage.setItem(\"selectedRoom\", selectedRoom);\n    }\n  }, [selectedRoom, listEMR])\n\n  async function createEmr(patientId, physicianId, visit) {\n    try {\n      setCreateEMRLoading(prev => [...prev, ...[visit.id]]);\n      const addEMRResponse = await addEMRAPI(patientId, physicianId);\n      console.log(addEMRResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setCreateEMRLoading(prev => {\n        const cloneArr = [...prev];\n        cloneArr.splice(cloneArr.indexOf(visit.id), 1);\n        return cloneArr\n      });\n    }\n  }\n\n  function handlePatientClick(visit) {\n    const { patient } = visit;\n\n    \n    // Create an empty EMR\n    // createEmr(patient.id, user.id, visit);\n\n    // return;\n    setListEMR(prev => {\n      const emrObj = {\n        id: visit.id,\n        patient: {\n          id: patient.id,\n          first_name: patient.first_name,\n          last_name: patient.last_name,\n          gender: patient.gender,\n          role: patient.role.name,\n          avatar: patient.avatar,\n          DOB: patient.DOB\n        },\n        physician: {\n          id: user.id,\n          first_name: user.first_name,\n          last_name: user.last_name,\n          gender: user.gender,\n          role: user.role.name,\n          avatar: user.avatar\n        },\n        room: visit.room.name,\n        livingFunctions: {\n          heartbeat: null,\n          temp: null,\n          pressure: null,\n          breathing: null,\n          height: null,\n          weight: null,\n          bmi: null\n        },\n        emr_diseases: null,\n        emr_services: null,\n        emr_drugs: null,\n        images: null,\n        created_at: visit.created_at,\n        symptom: \"\",\n      }\n      const newArr = [...prev, ...[emrObj]];\n      const unique = removeDuplicates(newArr, \"id\");\n      localStorage.setItem(\"listEMR\", JSON.stringify(unique));\n      return unique;\n    });\n    history.push(`${pathname}/examination?visit-id=${visit.id}`);\n  }\n\n  function handleChangeRoom(value) {\n    setSelectedRoom(value);\n  }\n\n  return (\n    <>\n      <Row className=\"flex-no-wrap\">\n        <Col style={{ width: 350 }} className=\"flex-shrink-0\">\n          <div className=\"mb-5\">\n            <h2 className=\"text-sm\">Phòng trực</h2>\n            <Select loading={roomLoading} style={{ width: '100%' }} value={selectedRoom} onChange={handleChangeRoom}>\n              {\n                rooms.map(room => (\n                  <Select.Option key={room.id} value={room.id}>{room.name}</Select.Option>\n                ))\n              }\n            </Select>\n          </div>\n\n\n        </Col>\n        <Col className=\"ml-3\" flex={1}>\n          <h2 className=\"text-sm\">Bệnh nhân đang chờ khám</h2>\n          {\n            !selectedRoom ?\n              <Empty description=\"Vui lòng chọn phòng\" />\n              :\n              visitList?.length > 0 ?\n                <Table dataSource={visitList} columns={tableColumns} rowKey=\"id\" loading={visitLoading} />\n                : <Empty description=\"Không có dữ liệu\" />\n          }\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nconst mapStateToProps = state => ({\n  user: state.userState.user\n})\n\nexport default connect(mapStateToProps)(VisitPage);","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\n\nconst endpointPrefix = `${API_URL}/user/patient`;\n\nexport function listAllPatientsAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}\n\nexport function getPatientDetailsAPI(patientId) {\n  const url = `${endpointPrefix}/${patientId}/`;\n  return axios.get(url);\n}","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { PageHeader, Table, Space, Button } from 'antd';\nimport { EyeOutlined } from '@ant-design/icons';\nimport { Link, useRouteMatch } from 'react-router-dom';\n\n// API\nimport { listAllPatientsAPI } from 'services/user/patient.service';\n\nconst PatientPage = props => {\n  const { user } = props;\n  const { path } = useRouteMatch();\n\n  const [patientData, setPatientData] = useState(null);\n  const [patientLoading, setPatientLoading] = useState(false);\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Họ và tên',\n      key: 'fullname',\n      render: (text, record) => record.first_name + \" \" + record.last_name\n    },\n    {\n      title: 'Giới tính',\n      key: 'gender',\n      dataIndex: 'gender'\n    },\n    {\n      title: 'Địa chỉ',\n      key: 'address',\n      render: (text, record) => record.address || <i>Đang cập nhật...</i>\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record) => (\n        <Space>\n          <Link to={`${path}/${record.id}`}>\n            <Button icon={<EyeOutlined />}></Button>\n          </Link>\n        </Space>\n      )\n    }\n  ]\n\n  async function listAllPatient() {\n    try {\n      setPatientLoading(true);\n      const patientResults = await listAllPatientsAPI();\n      const patientData = patientResults.data;\n      setPatientData(patientData);\n    } catch (error) {\n\n    } finally {\n      setPatientLoading(false);\n    }\n  }\n\n  async function getInitialData() {\n    await Promise.all([\n      listAllPatient()\n    ])\n  }\n\n  useEffect(() => {\n    getInitialData()\n  }, []);\n\n  return (\n    <>\n      <PageHeader title=\"Bệnh nhân\" />\n      <Table columns={tableColumns} dataSource={patientData?.results} loading={patientLoading} />\n    </>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.userState.user\n  }\n}\n\nexport default connect(mapStateToProps)(PatientPage); ","import React from 'react';\nimport { Calendar, PageHeader, Row, Col } from 'antd';\n\nconst AppointmentPage = () => {\n  return (\n    <>\n      <PageHeader title=\"Lịch hẹn\" />\n      <Row>\n        <Col flex=\"1\">\n          <Calendar mode=\"month\" locale=\"vi\" />\n        </Col>\n\n        <Col flex=\"0 0 300px\">\n\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default AppointmentPage;","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/admin/manage-service`;\n\nexport function getServicesAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}\n\nexport function getServiceDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}\n\nexport function addServiceAPI({ name, price }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, { name, price: Number(price) });\n}\n\nexport function updateServiceAPI(id, { name, price }) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    name,\n    price: Number(price)\n  })\n}\n\nexport function deleteServiceAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Form, Input, Spin } from 'antd';\nimport { getServiceDetailsAPI } from 'services/admin/medical-service.service';\n\nconst ServiceForm = props => {\n  const { form, onFinish, defaultService } = props;\n\n  const [serviceDetail, setServiceDetail] = useState(null);\n  const [detailLoading, setDetailLoading] = useState(false);\n\n  async function getServiceDetail(id) {\n    try {\n      setDetailLoading(true);\n      const detailResponse = await getServiceDetailsAPI(id);\n      const serviceDetail = detailResponse.data;\n      setServiceDetail(serviceDetail);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setDetailLoading(false);\n    }\n  }\n\n  async function getData() {\n    if (defaultService?.id) {\n      await Promise.all([\n        getServiceDetail(defaultService.id),\n      ]);\n    }\n  }\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  useEffect(() => {\n    if (serviceDetail) {\n      form.setFieldsValue({\n        name: serviceDetail.name,\n        price: serviceDetail.price,\n      });\n    }\n  }, [serviceDetail, defaultService, form]);\n\n  return (\n    <Spin spinning={detailLoading}>\n      <Form\n        layout=\"vertical\"\n        form={form}\n        onFinish={onFinish}>\n\n        <Form.Item label=\"Tên dịch vụ\" name=\"name\" initialValue={serviceDetail?.name}>\n          <Input />\n        </Form.Item>\n\n        <Form.Item label=\"Giá\" name=\"price\" initialValue={serviceDetail?.price}>\n          <Input type=\"number\" suffix=\"VNĐ\" />\n        </Form.Item>\n      </Form>\n    </Spin>\n  )\n}\n\nexport default ServiceForm;","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport ServiceForm from 'forms/ServiceForm/ServiceForm';\nimport { getServicesAPI, addServiceAPI, updateServiceAPI, deleteServiceAPI } from 'services/admin/medical-service.service';\nimport { formActions } from 'constant/formActions';\nimport NumberFormat from 'react-number-format';\n\nconst ServicePage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [services, setServices] = useState();\n  const [fetchingServices, setFetchingServices] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedService, setSelectedService] = useState(null);\n  const [serviceForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Tên dịch vụ',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Giá',\n      key: 'price',\n      dataIndex: 'price',\n      render: (text, record, index) => (<NumberFormat thousandSeparator=\" \" suffix=\" VNĐ\" value={text} displayType=\"text\" />)\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getServices() {\n    try {\n      setFetchingServices(true);\n      const response = await getServicesAPI();\n      setServices(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingServices(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await serviceForm.validateFields();\n      const data = {\n        name: values.name,\n        price: values.price,\n      }\n      if (action === formActions.CREATE) {\n        await addServiceAPI(data);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateServiceAPI(selectedService.id, data);\n      }\n\n      getServices();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(service) {\n    setAction(formActions.UPDATE);\n    setSelectedService(service);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(service) {\n    try {\n      await deleteServiceAPI(service.id);\n      getServices();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    serviceForm.resetFields();\n    setSelectedService(null);\n  }\n\n  useEffect(() => {\n    getServices();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý thuốc</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={services}\n        loading={fetchingServices} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm thuốc' : 'Cập nhật thuốc'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <ServiceForm onFinish={handleFormSubmit} form={serviceForm} defaultService={selectedService} />\n      </Modal>\n    </>\n  )\n}\n\nexport default ServicePage;","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\n\nconst endpointPrefix = `${API_URL}/admin/manage-working-hours`;\n\nexport function getWorkingHoursAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}\n\nexport function updateWorkingHourAPI(id, { weekday, isClosed }) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.put(url, {\n    weekday: weekday,\n    is_closed: isClosed\n  })\n}","import React, { useState, useEffect } from 'react';\nimport { Table, Switch } from 'antd';\nimport { getWorkingHoursAPI, updateWorkingHourAPI } from 'services/admin/working-hours.service';\n\nconst WorkingHourPage = () => {\n\n  const [workingHours, setWorkingHours] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const tableColumns = [\n    {\n      title: 'Ngày',\n      key: 'weekday',\n      dataIndex: 'weekday'\n    },\n    {\n      title: 'Đóng cửa',\n      key: 'is_closed',\n      render: (text, record) => (\n        <Switch\n          checked={record.is_closed}\n          onChange={() => handleWorkingHourChange(record)} />\n      )\n    }\n  ]\n\n  async function getWorkingHours() {\n    try {\n      setLoading(true);\n      const workingHoursResponse = await getWorkingHoursAPI();\n      setWorkingHours(workingHoursResponse.data.sort((a, b) => {\n        if (a.id < b.id) {\n          return -1\n        } else {\n          return 1\n        }\n      }));\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleWorkingHourChange(wh) {\n    try {\n      setLoading(true);\n      await updateWorkingHourAPI(wh.id, {\n        weekday: wh.weekday,\n        isClosed: !wh.is_closed\n      });\n      getWorkingHours();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    getWorkingHours();\n  }, []);\n\n  return (\n    <>\n      <h1 className=\"text-xl\">Quản lý giờ làm việc</h1>\n      <div style={{width: 400}}>\n      <Table\n        rowKey=\"weekday\"\n        dataSource={workingHours}\n        columns={tableColumns}\n        loading={loading}\n        pagination={false} />\n      </div>\n      \n    </>\n  )\n}\n\nexport default WorkingHourPage;","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst RoomForm = props => {\n  const { form, onFinish, defaultRoom } = props;\n\n  return (\n    <Form\n      layout=\"vertical\"\n      form={form}\n      onFinish={onFinish}>\n      <Form.Item label=\"Số phòng\" name=\"number\" initialValue={defaultRoom?.number}>\n        <Input type=\"number\" autoFocus />\n      </Form.Item>\n      <Form.Item label=\"Tên phòng\" name=\"name\" initialValue={defaultRoom?.name}>\n        <Input />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default RoomForm;","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport RoomForm from 'forms/RoomForm/RoomForm';\nimport { addRoomAPI, deleteRoomAPI, getRoomAPI, updateRoomAPI } from 'services/admin/room.service';\nimport { formActions } from 'constant/formActions';\n\nconst RoomPage = () => {\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [rooms, setCategories] = useState([]);\n  const [fetchingCategories, setFetchingCategories] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedRoom, setSelectedRoom] = useState(null);\n  const [roomForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Số phòng',\n      key: 'number',\n      dataIndex: 'number'\n    },\n    {\n      title: 'Tên',\n      key: 'name',\n      dataIndex: 'name'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record, index) => (\n        <Space size={10}>\n          <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n          <Popconfirm\n            onConfirm={() => handleDelete(record)} title=\"Bạn có chắc muốn xóa không?\"\n            okText=\"Xóa\"\n            okType=\"danger\"\n            cancelText=\"Hủy bỏ\">\n            <Button icon={<DeleteOutlined />}></Button>\n          </Popconfirm>\n        </Space>\n      )\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getRooms() {\n    try {\n      setFetchingCategories(true);\n      const response = await getRoomAPI();\n      setCategories(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingCategories(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await roomForm.validateFields();\n      if (action === formActions.CREATE) {\n        await addRoomAPI(values);\n      }\n\n      if (action === formActions.UPDATE) {\n        await updateRoomAPI(selectedRoom.id, values);\n      }\n\n      getRooms();\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  function handleEditClick(room) {\n    setAction(formActions.UPDATE);\n    setSelectedRoom(room);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(unit) {\n    try {\n      await deleteRoomAPI(unit.id);\n      getRooms();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    roomForm.resetFields();\n    setSelectedRoom(null);\n  }\n\n  useEffect(() => {\n    getRooms();\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý phòng</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={rooms}\n        \n        loading={fetchingCategories} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm phòng' : 'Cập nhật phòng'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <RoomForm onFinish={handleFormSubmit} form={roomForm} defaultRoom={selectedRoom} />\n      </Modal>\n    </>\n  )\n}\n\nexport default RoomPage;","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\nimport qs from 'qs';\n\nconst endpointPrefix = `${API_URL}/admin/manage-user`;\n\nexport function getUsersAPI(query) {\n  const url = `${endpointPrefix}/?${qs.stringify(query)}`;\n  return axios.get(url);\n}\n\nexport function getUserDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}\n\nexport function addUserAPI({ email, password, first_name, last_name, phone, DOB, gender, role_id }) {\n  const url = `${endpointPrefix}/`;\n  return axios.post(url, {\n    email,\n    password,\n    first_name,\n    last_name,\n    phone,\n    DOB: DOB.format('yyyy-MM-DD'),\n    gender,\n    role_id\n  });\n}\n\nexport function updateUserAPI(id, { email, password, first_name, last_name, phone, DOB, gender, role_id }) {\n  const url = `${endpointPrefix}/${id}/`;\n  if (password) {\n    return axios.put(url, {\n      email,\n      password,\n      first_name,\n      last_name,\n      phone,\n      DOB: DOB.format('yyyy-MM-DD'),\n      gender,\n      role_id\n    })\n  }\n\n  return axios.put(url, {\n    email,\n    first_name,\n    last_name,\n    phone,\n    DOB: DOB.format('yyyy-MM-DD'),\n    gender,\n    role_id\n  })\n}\n\nexport function deleteUserAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.delete(url);\n}\n\nexport function blockUserAPI(userId) {\n  const url = `${endpointPrefix}/${userId}/block/`;\n  return axios.get(url);\n}\n\nexport function unblockUserAPI(userId) {\n  const url = `${endpointPrefix}/${userId}/unblock/`;\n  return axios.get(url);\n}","export const ROLES = {\n  \"1\": {\n    name: \"admin\",\n    display: \"Quản trị viên\"\n  },\n  \"2\": {\n    name: \"physician\",\n    display: \"Bác sĩ\"\n  },\n  \"3\": {\n    name: \"receptionist\",\n    display: \"Lễ tân\"\n  },\n  \"4\": {\n    name: \"patient\",\n    display: \"Bệnh nhân\"\n  }\n}\n\nexport const ROLES_LIST = [1, 2, 3, 4];","import React, { useState, useEffect } from 'react';\nimport { Form, Input, Select, Spin, Row, Col, DatePicker, Radio } from 'antd';\nimport { getUserDetailsAPI } from 'services/admin/user.service';\nimport { ROLES, ROLES_LIST } from 'constant/roles';\nimport moment from 'moment';\n\nconst UserForm = props => {\n  const { form, onFinish, defaultUser } = props;\n  const [userDetail, setUserDetail] = useState(null);\n  const [detailLoading, setDetailLoading] = useState(false);\n\n  async function getUserDetail(id) {\n    try {\n      setDetailLoading(true);\n      const detailResponse = await getUserDetailsAPI(id);\n      const userDetail = detailResponse.data;\n      setUserDetail(userDetail);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setDetailLoading(false);\n    }\n  }\n\n  async function getData() {\n    if (defaultUser?.id) {\n      await Promise.all([\n        getUserDetail(defaultUser.id),\n      ]);\n    }\n  }\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  useEffect(() => {\n    if (userDetail) {\n      form.setFieldsValue({\n        email: userDetail.email,\n        first_name: userDetail.first_name,\n        last_name: userDetail.last_name,\n        phone: userDetail.phone,\n        DOB: moment(userDetail.DOB),\n        gender: userDetail.gender,\n        role_id: userDetail.role.id\n      });\n    }\n  }, [userDetail, defaultUser, form]);\n\n  return (\n    <Spin spinning={detailLoading}>\n      <Form\n        layout=\"vertical\"\n        form={form}\n        autoComplete=\"off\"\n        onFinish={onFinish}>\n        <Form.Item label=\"Email\" name=\"email\" initialValue={userDetail?.email} rules={[\n          {\n            required: true,\n            message: \"Vui lòng điền vào trường này\"\n          }\n        ]}>\n          <Input type=\"email\" />\n        </Form.Item>\n\n        <Form.Item label=\"Mật khẩu\" name=\"password\" rules={[\n          {\n            required: !userDetail?.id,\n            message: \"Vui lòng điền vào trường này\"\n          }\n        ]}>\n          <Input.Password />\n        </Form.Item>\n\n        <Row>\n          <Col flex={1}>\n            <Form.Item label=\"Họ\" name=\"first_name\" rules={[\n              {\n                required: true,\n                message: \"Vui lòng điền vào trường này\"\n              }\n            ]}>\n              <Input />\n            </Form.Item>\n          </Col>\n          <div style={{ width: 20 }}></div>\n          <Col flex={1}>\n            <Form.Item label=\"Tên\" name=\"last_name\" rules={[\n              {\n                required: true,\n                message: \"Vui lòng điền vào trường này\"\n              }\n            ]}>\n              <Input />\n            </Form.Item>\n          </Col>\n        </Row>\n\n        <Form.Item label=\"Điện thoại\" name=\"phone\" initialValue={userDetail?.phone} rules={[\n          {\n            required: true,\n            message: \"Vui lòng điền vào trường này\"\n          }\n        ]}>\n          <Input type=\"tel\" />\n        </Form.Item>\n\n        <Row>\n          <Col>\n            <Form.Item label=\"Ngày sinh\" name=\"DOB\" rules={[\n              {\n                required: true,\n                message: \"Vui lòng chọn ngày sinh\"\n              }\n            ]}>\n              <DatePicker placeholder=\"Chọn ngày\" />\n            </Form.Item>\n          </Col>\n          <div style={{ width: 20 }}></div>\n          <Col flex={1}>\n            <Form.Item label=\"Giới tính\" name=\"gender\" rules={[\n              {\n                required: true,\n                message: \"Vui lòng chọn một giá trị\"\n              }\n            ]}>\n              <Radio.Group>\n                <Radio value=\"Nam\">Nam</Radio>\n                <Radio value=\"Nữ\">Nữ</Radio>\n                <Radio value=\"Khác\">Khác</Radio>\n              </Radio.Group>\n            </Form.Item>\n          </Col>\n        </Row>\n\n\n        <Form.Item label=\"Vai trò\" name=\"role_id\" initialValue={userDetail?.role_id} rules={[\n          {\n            required: true,\n            message: \"Vui lòng chọn vai trò\"\n          }\n        ]}>\n          <Select>\n            {\n              ROLES_LIST.map(role_id => (\n                <Select.Option key={role_id} value={role_id}>{ROLES[role_id].display}</Select.Option>\n              ))\n            }\n          </Select>\n        </Form.Item>\n      </Form>\n    </Spin>\n  )\n}\n\nexport default UserForm;","import React from 'react';\nimport classnames from 'classnames';\nimport styles from './Circle.module.scss';\n\nconst Circle = props => {\n\n  const classes = classnames(\n    styles.circle,\n    { [styles['circle--success']]: props.color === 'success' }\n  )\n\n  return (\n    <div className={classes}></div>\n  )\n}\n\nexport default Circle;","import React, { useState, useEffect } from 'react';\nimport { Row, Col, Button, Modal, Table, Form, Popconfirm, Space } from 'antd';\nimport { PlusOutlined, LockOutlined, UnlockOutlined, EditOutlined, DeleteOutlined, EyeOutlined } from '@ant-design/icons';\nimport UserForm from 'forms/UserForm/UserForm';\nimport { getUsersAPI, addUserAPI, updateUserAPI, deleteUserAPI, blockUserAPI, unblockUserAPI } from 'services/admin/user.service';\nimport { formActions } from 'constant/formActions';\nimport NumberFormat from 'react-number-format';\nimport { ROLES } from 'constant/roles';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport Circle from 'components/Circle/Circle';\n\nconst AdminAccountPage = () => {\n\n  const history = useHistory();\n  const { pathname, search } = useLocation();\n  const urlSearchParams = new URLSearchParams(search);\n  const currentPageOnURL = Number(urlSearchParams.get('page'));\n  const [page, setPage] = useState(currentPageOnURL || 1);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [users, setUsers] = useState();\n  const [fetchingUsers, setFetchingUsers] = useState(false);\n  const [modalLoading, setModalLoading] = useState(false);\n  const [action, setAction] = useState(formActions.CREATE);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [userForm] = Form.useForm();\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: '#',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Họ và tên',\n      key: 'fullname',\n      render: (text, record) => record.first_name + \" \" + record.last_name\n    },\n    {\n      title: 'Email',\n      key: 'email',\n      dataIndex: 'email',\n      render: (text, record) => (\n        <Space>\n          <Circle color={record.is_verified_email ? 'success' : ''} />\n          <span>{record.email}</span>\n        </Space>\n      )\n    },\n    {\n      title: 'Điện thoại',\n      key: 'phone',\n      dataIndex: 'phone',\n      render: (text, record) => (\n        <Space>\n          <Circle color={record.is_verified_phone ? 'success' : ''} />\n          <span>{record.phone}</span>\n        </Space>\n      )\n    },\n    {\n      title: 'Vai trò',\n      key: 'role',\n      render: (text, record) => <span>{ROLES[record.role.id].display}</span>\n    },\n    {\n      title: 'Hành động', key: 'action', render: (text, record) => {\n        return (\n          <Space size={10}>\n            <Button icon={<EyeOutlined />} onClick={() => handleViewClick(record)}></Button>\n            <Button icon={<EditOutlined />} onClick={() => handleEditClick(record)}></Button>\n            <Popconfirm\n              onConfirm={() => handleDelete(record)}\n              title=\"Bạn có chắc muốn xóa không?\"\n              okText=\"Xóa\"\n              okType=\"danger\"\n              cancelText=\"Hủy bỏ\">\n              <Button icon={<DeleteOutlined />}></Button>\n            </Popconfirm>\n            {\n              <Popconfirm\n                onConfirm={() => handleBlockUnblock(record)}\n                title={`Bạn có chắc muốn ${record.is_active ? 'khóa' : 'mở khóa'} tài khoản này không?`}\n                okText={record.is_active ? \"Khóa\" : \"Mở khóa\"}\n                okType={record.is_active ? \"danger\" : \"primary\"}\n                cancelText=\"Hủy bỏ\">\n                {\n                  record.is_active ?\n                    <Button danger type=\"link\" icon={<LockOutlined />}>Khóa</Button>\n                    :\n                    <Button type=\"link\" icon={<UnlockOutlined />}>Mở khóa</Button>\n                }\n              </Popconfirm>\n            }\n          </Space>\n        )\n      }\n    }\n  ]\n\n  function handleOpenModal() {\n    setAction(formActions.CREATE);\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  async function getUsers(page) {\n    try {\n      setFetchingUsers(true);\n      const response = await getUsersAPI({ page: page });\n      setUsers(response.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setFetchingUsers(false);\n    }\n  }\n\n  async function handleFormSubmit() {\n    try {\n      setModalLoading(true);\n      const values = await userForm.validateFields();\n      if (action === formActions.CREATE) {\n        await addUserAPI(values);\n      }\n\n      if (action === formActions.UPDATE) {\n        if (values.password.length === 0) {\n          delete values.password;\n        }\n        await updateUserAPI(selectedUser.id, values);\n      }\n\n      getUsers(page);\n\n      setModalVisible(false);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setModalLoading(false);\n    }\n  }\n\n  async function handleBlockUnblock(user) {\n    try {\n      setFetchingUsers(true);\n      if (user.is_active) {\n        await blockUserAPI(user.id);\n      } else {\n        await unblockUserAPI(user.id);\n      }\n      getUsers();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function handleViewClick(user) {\n\n  }\n\n  function handleEditClick(user) {\n    setAction(formActions.UPDATE);\n    setSelectedUser(user);\n    setModalVisible(true);\n  }\n\n  async function handleDelete(user) {\n    try {\n      await deleteUserAPI(user.id);\n      getUsers(page);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function afterClose() {\n    userForm.resetFields();\n    setSelectedUser(null);\n  }\n\n  function handlePaginationChange(page) {\n    getUsers(page);\n    setPage(page);\n    history.push({\n      pathname: pathname,\n      search: `page=${page}`\n    })\n  }\n\n  useEffect(() => {\n    getUsers(page);\n  }, []);\n\n  return (\n    <>\n      <Row justify=\"space-between\">\n        <Col><h1 className=\"text-xl\">Quản lý tài khoản</h1></Col>\n        <Col>\n          <Button type=\"primary\" icon={<PlusOutlined />} onClick={handleOpenModal}>Tạo mới</Button>\n        </Col>\n      </Row>\n      <Table\n        rowKey=\"id\"\n        columns={tableColumns}\n        dataSource={users?.results}\n        pagination={{\n          defaultCurrent: page,\n          current: page,\n          pageSize: 10,\n          total: users?.count,\n          onChange: handlePaginationChange\n        }}\n        loading={fetchingUsers} />\n      <Modal\n        visible={modalVisible}\n        title={action === formActions.CREATE ? 'Thêm tài khoản' : 'Cập nhật tài khoản'}\n        onCancel={handleCloseModal}\n        confirmLoading={modalLoading}\n        destroyOnClose={true}\n        afterClose={afterClose}\n        onOk={handleFormSubmit}>\n        <UserForm onFinish={handleFormSubmit} form={userForm} defaultUser={selectedUser} />\n      </Modal>\n    </>\n  )\n}\n\nexport default AdminAccountPage;","import React from 'react';\n\nconst AdminSettingPage = () => {\n  return (\n    <div>Admin setting page</div>\n  )\n}\n\nexport default AdminSettingPage;","import React, { useEffect } from 'react';\nimport Cookie from 'js-cookie';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logoutAction } from 'store/actions/auth.action';\nimport jwtDecode from 'jwt-decode';\n\nconst withPrivateRoute = (Child, roles) => {\n  const WrapperComponent = (props) => {\n\n    const dispatch = useDispatch();\n    const token = Cookie.get('EMR_token');\n    const user = useSelector((state) => state.userState.user);\n\n    function isValidRole(user) {\n      const userRole = user?.role.name;\n      const isValid = roles.includes(userRole);\n      return isValid;\n    }\n\n    useEffect(() => {\n      if (user && user.role) {\n        if (!isValidRole(user)) {\n          dispatch(logoutAction());\n        }\n      }\n    }, [user, dispatch]);\n\n    try {\n      if (!token || token.length === 0 || !jwtDecode(token)) {\n        return <Redirect to=\"/login\" />;\n      } else {\n        return <Child {...props} />\n      }\n      \n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return WrapperComponent;\n}\n\nexport default withPrivateRoute;","import React from 'react';\nimport { Button, Layout, Modal } from 'antd';\nimport {\n  LogoutOutlined,\n  ExclamationCircleOutlined\n} from '@ant-design/icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logoutAction } from 'store/actions/auth.action';\n\nconst { Header } = Layout;\n\nconst CustomHeader = () => {\n\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state.userState.user);\n\n  function handleLogout() {\n    Modal.confirm({\n      title: \"Đăng xuất\",\n      icon: <ExclamationCircleOutlined />,\n      content: \"Bạn có chắc muốn đăng xuất không?\",\n      onOk() {\n        dispatch(logoutAction());\n      }\n    })\n  }\n\n  return (\n    <Header className=\"header flex items-center\">\n      <div className=\"text-2xl text-white\">EMR</div>\n      <div className=\"ml-auto\"></div>\n      <div className=\"text-white\">{user?.first_name} {user?.last_name} <span className=\"ml-3\">|</span></div>\n      <Button type=\"default\" ghost icon={<LogoutOutlined />} className=\"border-none\" onClick={handleLogout}>Đăng xuất</Button>\n    </Header>\n  )\n}\n\nexport default CustomHeader;","import React from 'react';\nimport { Link, Redirect, Switch, Route, useRouteMatch, useLocation } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport {\n  UserOutlined,\n  DashboardOutlined,\n  MedicineBoxOutlined,\n  BugOutlined,\n  DollarOutlined,\n  IdcardOutlined,\n  ClockCircleOutlined,\n  AppstoreOutlined,\n  CalendarOutlined,\n  ContainerOutlined,\n  SettingOutlined,\n  NotificationOutlined} from '@ant-design/icons';\nimport AdminDashboard from 'pages/admin/dashboard';\nimport DrugCategoryPage from 'pages/common/drug/drug-category';\nimport DrugUnitPage from 'pages/common/drug/drug-unit';\nimport DrugPage from 'pages/common/drug/drug';\nimport DrugInstructionPage from 'pages/common/drug/drug-instruction';\nimport DiseaseCategory from 'pages/common/disease/disease-category';\nimport DiseasePage from 'pages/common/disease/disease';\nimport NotificationPage from 'pages/common/notification/notification';\nimport VisitPage from 'pages/common/visit/visit';\nimport PatientPage from 'pages/common/patient/patient';\nimport AppointmentPage from 'pages/common/appointment/apointment';\nimport ServicePage from 'pages/common/service/service';\nimport WorkingHourPage from 'pages/admin/working-hour';\nimport RoomPage from 'pages/common/room/room';\nimport AdminAccountPage from 'pages/admin/account';\nimport AdminSettingPage from 'pages/admin/setting';\nimport withPrivateRoute from 'HOCs/withPrivateRoute';\nimport CustomHeader from 'components/Header';\n\nconst { Sider, Content } = Layout;\nconst { SubMenu } = Menu;\n\nconst AdminLayout = () => {\n  const match = useRouteMatch();\n  const location = useLocation();\n  const path = match.path;\n\n  return (\n    <Layout>\n      <CustomHeader />\n      <Layout>\n        <Sider width={200} className=\"site-layout-background\">\n          <Menu\n            mode=\"inline\"\n            style={{ height: '100%', borderRight: 0 }}\n            selectedKeys={[location.pathname]}\n          >\n            <Menu.Item key=\"/admin/dashboard\" icon={<DashboardOutlined />}>\n              <Link to=\"/admin/dashboard\">Bảng điều khiển</Link>\n            </Menu.Item>\n            <SubMenu key=\"drug\" icon={<MedicineBoxOutlined />} title=\"Quản lý thuốc\">\n              <Menu.Item key=\"/admin/drug/category\">\n                <Link to=\"/admin/drug/category\">Loại thuốc</Link>\n              </Menu.Item>\n              <Menu.Item key=\"/admin/drug/unit\">\n                <Link to=\"/admin/drug/unit\">Đơn vị tính</Link>\n              </Menu.Item>\n              <Menu.Item key=\"/admin/drug\">\n                <Link to=\"/admin/drug\">Thuốc</Link>\n              </Menu.Item>\n              <Menu.Item key=\"/admin/drug/instruction\">\n                <Link to=\"/admin/drug/instruction\">Hướng dẫn sử dụng</Link>\n              </Menu.Item>\n            </SubMenu>\n            <SubMenu key=\"disease\" icon={<BugOutlined />} title=\"Quản lý bệnh\">\n              <Menu.Item key=\"/admin/disease/category\">\n                <Link to=\"/admin/disease/category\">Loại bệnh</Link>\n              </Menu.Item>\n              <Menu.Item key=\"/admin/disease\">\n                <Link to=\"/admin/disease\">Bệnh</Link>\n              </Menu.Item>\n            </SubMenu>\n\n            <Menu.Item key=\"/admin/notification\" icon={<NotificationOutlined />}>\n              <Link to=\"/admin/notification\">Thông báo</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/admin/visit\" icon={<ContainerOutlined />}>\n              <Link to=\"/admin/visit\">Khám bệnh</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/admin/patient\" icon={<IdcardOutlined />}>\n              <Link to=\"/admin/patient\">Bệnh nhân</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/admin/appointment\" icon={<CalendarOutlined />}>\n              <Link to=\"/admin/appointment\">Lịch hẹn</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/admin/service\" icon={<DollarOutlined />}>\n              <Link to=\"/admin/service\">Dịch vụ</Link>\n            </Menu.Item>\n\n            <Menu.Item key=\"/admin/working-hour\" icon={<ClockCircleOutlined />}>\n              <Link to=\"/admin/working-hour\">Giờ làm việc</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/admin/room\" icon={<AppstoreOutlined />}>\n              <Link to=\"/admin/room\">Phòng</Link>\n            </Menu.Item>\n\n            <Menu.Item key=\"/admin/account\" icon={<UserOutlined />}>\n              <Link to=\"/admin/account\">Tài khoản</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/admin/setting\" icon={<SettingOutlined />}>\n              <Link to=\"/admin/setting\">Cài đặt</Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout style={{ padding: '0 24px 24px' }}>\n          <Content\n            className=\"site-layout-background\"\n            style={{\n              padding: 24,\n              margin: 0,\n              minHeight: 280,\n            }}\n          >\n            <Switch>\n              {/* Dashboard */}\n              <Route path={`${path}/dashboard`}>\n                <AdminDashboard />\n              </Route>\n\n              {/* Drug */}\n              <Route path={`${path}/drug/category`}>\n                <DrugCategoryPage />\n              </Route>\n              <Route path={`${path}/drug/unit`}>\n                <DrugUnitPage />\n              </Route>\n              <Route path={`${path}/drug`} exact>\n                <DrugPage />\n              </Route>\n              <Route path={`${path}/drug/instruction`}>\n                <DrugInstructionPage />\n              </Route>\n\n              {/* Disease */}\n              <Route path={`${path}/disease/category`}>\n                <DiseaseCategory />\n              </Route>\n              <Route path={`${path}/disease`}>\n                <DiseasePage />\n              </Route>\n\n              {/* Notification */}\n              <Route path={`${path}/notification`}>\n                <NotificationPage />\n              </Route>\n\n              {/* Visit */}\n              <Route path={`${path}/visit`}>\n                <VisitPage />\n              </Route>\n\n              {/* Patient */}\n              <Route path={`${path}/patient`}>\n                <PatientPage />\n              </Route>\n\n              {/* Appointment */}\n              <Route path={`${path}/appointment`}>\n                <AppointmentPage />\n              </Route>\n\n              {/* Service */}\n              <Route path={`${path}/service`}>\n                <ServicePage />\n              </Route>\n\n              {/* Service */}\n              <Route path={`${path}/working-hour`}>\n                <WorkingHourPage />\n              </Route>\n\n              {/* Room */}\n              <Route path={`${path}/room`}>\n                <RoomPage />\n              </Route>\n\n              {/* Room */}\n              <Route path={`${path}/account`}>\n                <AdminAccountPage />\n              </Route>\n\n              {/* Room */}\n              <Route path={`${path}/setting`}>\n                <AdminSettingPage />\n              </Route>\n\n              {/* Fallback */}\n              <Redirect to={`/admin/dashboard`} />\n            </Switch>\n          </Content>\n        </Layout>\n      </Layout>\n    </Layout>\n  )\n}\n\nexport default withPrivateRoute(AdminLayout, ['admin']);","import React, { useState } from 'react';\nimport { Form, Input, Row, Col, Button } from 'antd';\nimport { SaveOutlined } from '@ant-design/icons';\n\nconst { Item, useForm } = Form;\n\nconst VisitLivingFunctionForm = props => {\n\n  const { currentValues} = props;\n  const [bmi, setBmi] = useState(currentValues?.bmi || 0.0);\n\n  const [form] = useForm();\n  const row1 = [\n    {\n      name: \"heartbeat\",\n      text: \"Mạch\",\n      unit: \"lần/phút\"\n    },\n    {\n      name: \"temp\",\n      text: \"Nhiệt độ\",\n      unit: \"°C\"\n    },\n    {\n      name: \"pressure\",\n      text: \"Huyết áp\",\n      unit: \"mmHg\"\n    },\n  ]\n\n  const row2 = [\n    {\n      name: \"breathing\",\n      text: \"Nhịp thở\",\n      unit: \"lần/phút\"\n    },\n    {\n      name: \"height\",\n      text: \"Chiều cao\",\n      unit: \"cm\"\n    },\n    {\n      name: \"weight\",\n      text: \"Cân nặng\",\n      unit: \"kg\"\n    },\n  ]\n\n  function getBMI() {\n    const heightStr = form.getFieldValue('height');\n    const weightStr = form.getFieldValue('weight');\n    const height = Number(heightStr);\n    const weight = Number(weightStr);\n\n    if (!height || !weight || weight <= 0) {\n      setBmi(0.00);\n    } else {\n      setBmi(weight / Math.pow(height * 0.01, 2));\n    }\n  }\n\n  function getBMIDesc() {\n    let result = \"\";\n\n    if (bmi === 0) {\n      return \"Không có dữ liệu\"\n    } else if (bmi < 16) {\n      return \"Gầy độ III\";\n    } else if (bmi >= 16 && bmi < 17) {\n      return \"Gầy độ II\";\n    } else if (bmi >= 17 && bmi < 18.5) {\n      return \"Gầy độ I\";\n    } else if (bmi >= 18.5 && bmi < 25) {\n      return \"Bình thường\";\n    } else if (bmi >= 25 && bmi < 30) {\n      return \"Thừa cân\";\n    } else if (bmi >= 30 && bmi < 35) {\n      return \"Béo phì độ I\";\n    } else if (bmi >= 35 && bmi < 40) {\n      return \"Béo phì độ II\";\n    } else {\n      return \"Béo phì độ III\";\n    }\n  }\n\n  function onFinish(values) {\n    values.bmi = bmi;\n    props.onFinish(values);\n  }\n\n  return (\n    <Form layout=\"vertical\" form={form} onChange={getBMI} onFinish={onFinish}>\n      <Row justify=\"start\" gutter={15}>\n        {\n          row1.map(field => (\n            <Col flex=\"0 0 243px\" key={field.name}>\n              <Item name={field.name} key={field.name} rules={[{ required: true, message: \"Vui lòng nhập trường này\" }]} initialValue={currentValues[field.name]}>\n                <Input type={field.name !== \"pressure\" ? \"number\" : \"text\"} placeholder={field.text} suffix={field.unit} />\n              </Item>\n            </Col>\n          ))\n        }\n      </Row>\n      <Row justify=\"start\" gutter={15}>\n        {\n          row2.map(field => (\n            <Col flex=\"0 0 243px\" key={field.name}>\n              <Item name={field.name} key={field.name} rules={[{ required: true, message: \"Vui lòng nhập trường này\" }]} initialValue={currentValues[field.name]}>\n                <Input type=\"number\" placeholder={field.text} suffix={field.unit} />\n              </Item>\n            </Col>\n          ))\n        }\n      </Row>\n      <div className=\"mb-3\">\n        <strong>BMI: </strong>{bmi.toFixed(2)} ({getBMIDesc()})\n      </div>\n      <div>\n        <Button icon={<SaveOutlined />} htmlType=\"submit\">Lưu</Button>\n      </div>\n    </Form>\n  )\n}\n\nexport default VisitLivingFunctionForm;","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\n\nconst endpointPrefix = `${API_URL}/user/disease`;\n\nexport function getDiseasesAPI(categoryId) {\n  const url = `${endpointPrefix}/`;\n  if (categoryId) {\n    return axios.get(`${url}?disease_category=${categoryId}`);\n  }\n  return axios.get(url);\n}\n\nexport function getDiseaseDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Form, Select, Row, Col, Button } from 'antd';\nimport { getDiseasesAPI } from 'services/user/disease.service';\nimport { getDiseasesAPI as adminGetDiseasesAPI } from 'services/admin/disease.service';\nimport { SaveOutlined, MinusCircleOutlined } from '@ant-design/icons';\n\nconst { Item, List } = Form;\nconst { Option } = Select;\n\nconst VisitDiseaseForm = props => {\n  const { form, categories, user, currentValues } = props;\n  const [localCategories, setLocalCategories] = useState(categories);\n  const [diseases, setDiseases] = useState(null);\n  const [diseaseLoading, setDiseaseLoading] = useState(false);\n\n  async function getDiseasesByCategory(category) {\n    try {\n      setDiseaseLoading(true);\n      setDiseases(null);\n      let diseaseResponse;\n      if (user.role === \"admin\") {\n        diseaseResponse = await adminGetDiseasesAPI(category);\n      } else {\n        diseaseResponse = await getDiseasesAPI(category);\n      }\n      setDiseases(diseaseResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setDiseaseLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    setLocalCategories(categories);\n  }, [categories])\n\n  function handleCatSearch(value) {\n    console.log(value);\n\n    if (value) {\n      const filterArr = categories.filter(cat => cat.name.includes(value));\n      console.log(filterArr);\n      setLocalCategories(filterArr);\n    } else {\n      setLocalCategories(categories);\n    }\n  }\n\n  function handleCatChange(value) {\n    if (value) {\n      getDiseasesByCategory(value);\n    }\n  }\n\n  function onFinish(values) {\n    props.onFinish(values);\n  }\n\n  return (\n    <Form form={form} name=\"dynamic_form\" layout=\"vertical\" onFinish={onFinish} initialValues={currentValues}>\n      <List name=\"emr_diseases\">\n        {(fields, { add, remove }) => (\n          <>\n            {\n              fields.map((field, index) => (\n                <Row gutter={15} key={field.key} align=\"middle\" className=\"mb-5\">\n                  <Col>{index + 1}</Col>\n                  <Col flex=\"0 0 300px\">\n                    <Item\n                      {...field}\n                      name={[field.name, 'diseaseCategory']}\n                      fieldKey={[field.fieldKey, 'diseaseCategory']}\n                      rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}\n                      style={{margin: 0}}>\n                      <Select\n                        showSearch onSearch={handleCatSearch}\n                        placeholder=\"Nhóm bệnh\"\n                        onChange={handleCatChange}>\n                        {\n                          localCategories.map(cat => (\n                            <Option key={cat.id} value={cat.id}>{cat.name}</Option>\n                          ))\n                        }\n                      </Select>\n                    </Item>\n                  </Col>\n                  <Col flex={5}>\n                    <Item\n                      {...field}\n                      name={[field.name, 'disease']}\n                      fieldKey={[field.fieldKey, 'disease']}\n                      rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}\n                      style={{margin: 0}}>\n                      <Select loading={diseaseLoading} placeholder=\"Bệnh\">\n                        {\n                          diseases?.results.map(disease => (\n                            <Option key={disease.id} value={disease.name}>{disease.name}</Option>\n                          ))\n                        }\n                      </Select>\n                    </Item>\n                  </Col>\n                  <Col>\n                    <MinusCircleOutlined onClick={() => remove(field.name)} />\n                  </Col>\n                </Row>\n              ))\n            }\n            <Item>\n              <Button type=\"dashed\" block onClick={() => add()}>Thêm bệnh</Button>\n            </Item>\n          </>\n        )\n        }\n      </List>\n\n      <div>\n        <Button htmlType=\"submit\" icon={<SaveOutlined />}>Lưu</Button>\n      </div>\n    </Form>\n  )\n}\n\nexport default VisitDiseaseForm;","import React from 'react';\nimport { Form, Row, Col, Select, Button, Input } from 'antd';\nimport NumberFormat from 'react-number-format';\nimport { SaveOutlined, PlusOutlined, MinusCircleOutlined } from '@ant-design/icons';\n\nconst { Item, List } = Form;\nconst { Option } = Select;\n\nconst VisitServiceForm = props => {\n\n  const { services, currentValues } = props;\n\n  function onFinish(values) {\n    // Transform array of indexes to array of objects\n    values.emr_services = values.emr_services.map(service => ({ name: services[service.index].name, price: services[service.index].price }));\n    props.onFinish(values);\n  }\n\n  return (\n    <Form onFinish={onFinish} initialValues={currentValues}>\n      <List name=\"emr_services\">\n        {\n          (fields, { add, remove }) => (\n            <>\n              {\n                fields.map((field, index) => (\n                  <Row gutter={15} key={field.key} align=\"middle\" className=\"mb-5\">\n                    <Col>{index + 1}</Col>\n                    <Col flex={1}>\n                      <Item {...field} name={[field.name, 'index']} fieldKey={[field.fieldKey, 'index']} style={{margin: 0}} rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}>\n                        <Select placeholder=\"Chọn dịch vụ\">\n                          {\n                            services.map((_, index) => (\n                              <Option value={index} key={services[index].id}>\n                                {services[index].name} (<NumberFormat displayType=\"text\" thousandSeparator=\" \" value={services[index].price} suffix=\" VNĐ\" />)\n                              </Option>\n                            ))\n                          }\n                        </Select>\n                      </Item>\n                    </Col>\n                    <Col>\n                          <MinusCircleOutlined onClick={() => remove(field.name)} />\n                    </Col>\n                  </Row>\n                ))\n              }\n              <Item>\n                <Button type=\"dashed\" block onClick={() => add()} icon={<PlusOutlined />}>Thêm dịch vụ</Button>\n              </Item>\n            </>\n          )\n        }\n      </List>\n\n      <div>\n        <Button htmlType=\"submit\" icon={<SaveOutlined />}>Lưu</Button>\n      </div>\n    </Form>\n  )\n}\n\nexport default VisitServiceForm;","import axios from 'axios';\nimport { API_URL } from 'constant/apiUrl';\nimport { getQueryString } from 'utils/string';\n\nconst endpointPrefix = `${API_URL}/user/drug`;\n\nexport function getDrugsAPI(params) {\n  const url = `${endpointPrefix}/`;\n\n  if (params) {\n    return axios.get(`${url}?${getQueryString(params)}`);\n  }\n  return axios.get(url);\n}\n\nexport function getDrugDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}","import React, { useState, useEffect } from 'react';\nimport { Form, Input, Select, Row, Col, Button } from 'antd';\nimport { getDrugsAPI as adminGetDrugsAPI } from 'services/admin/drug.service';\nimport { getDrugsAPI } from 'services/user/drug.service';\nimport { useForm } from 'antd/lib/form/Form';\nimport { PlusOutlined, MinusCircleOutlined, SaveOutlined } from '@ant-design/icons';\n\nconst { Item, List } = Form;\nconst { Option } = Select;\n\nconst VisitDrugForm = props => {\n  const { user, categories, instructions, currentValues } = props;\n\n  const [drugs, setDrugs] = useState([]);\n  const [drugLoading, setDrugLoading] = useState(false);\n\n  async function getDrugsByCategory(category) {\n    try {\n      setDrugLoading(true);\n      let drugResponse;\n      if (user.role === \"admin\") {\n        drugResponse = await adminGetDrugsAPI({ drug_category: category });\n      } else {\n        drugResponse = await getDrugsAPI({ drug_category: category });\n      }\n      setDrugs(drugResponse.data.results);\n    } catch (error) {\n\n    } finally {\n      setDrugLoading(false);\n    }\n  }\n\n  function handleCategoryChange(category) {\n    getDrugsByCategory(category);\n  }\n\n  return (\n    <Form layout=\"vertical\" onFinish={props.onFinish} initialValues={currentValues}>\n      <List name=\"emr_drugs\">\n        {(fields, { add, remove }) => (\n          <>\n            {\n              fields.map((field, index) => (\n                <Row gutter={15} key={field.key} align=\"middle\">\n                  <Col>{index + 1}</Col>\n                  <Col flex=\"0 0 220px\">\n                    <Item\n                      {...field}\n                      label=\"Nhóm thuốc\"\n                      name={[field.name, 'drugCategory']}\n                      fieldKey={[field.fieldKey, 'drugCategory']}\n                      rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}>\n                      <Select onChange={handleCategoryChange}>\n                        {\n                          categories.map(cat => (\n                            <Option key={cat.id} value={cat.id}>{cat.name}</Option>\n                          ))\n                        }\n                      </Select>\n                    </Item>\n                  </Col>\n                  <Col flex=\"1 0 220px\">\n                    <Item\n                      {...field}\n                      label=\"Thuốc\"\n                      name={[field.name, 'drug']}\n                      fieldKey={[field.fieldKey, 'drug']}\n                      rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}>\n                      <Select loading={drugLoading}>\n                        {\n                          drugs.map(drug => (\n                            <Option key={drug.id} value={drug.name}>{drug.code}. {drug.name}</Option>\n                          ))\n                        }\n                      </Select>\n                    </Item>\n                  </Col>\n                  <Col flex=\"0 0 120px\">\n                    <Item\n                      {...field}\n                      name={[field.name, 'drugInstruction']}\n                      fieldKey={[field.fieldKey, 'drugInstruction']}\n                      rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}\n                      label=\"Cách dùng\"\n                      style={{ minWidth: 200 }}>\n                      <Select>\n                        {\n                          instructions.map(ins => (\n                            <Option key={ins.id} value={ins.instruction}>{ins.instruction}</Option>\n                          ))\n                        }\n                      </Select>\n                    </Item>\n                  </Col>\n                  {/* </Row> */}\n                  {/* <Row gutter={15}> */}\n                  <Col flex=\"0 0 80px\">\n                    <Item\n                      {...field}\n                      name={[field.name, 'numberOfDays']}\n                      fieldKey={[field.fieldKey, 'numberOfDays']}\n                      rules={[{ required: true, message: \"Trường này là bắt buộc\" }]}\n                      label=\"Số ngày\">\n                      <Input type=\"number\" />\n                    </Item>\n                  </Col>\n                  <Col flex=\"0 0 80px\">\n                    <Item label=\"Sáng\" name={[field.name, 'morning']}>\n                      <Input type=\"number\" />\n                    </Item>\n                  </Col>\n                  <Col flex=\"0 0 80px\">\n                    <Item label=\"Trưa\" name={[field.name, 'afternoon']}>\n                      <Input type=\"number\" />\n                    </Item>\n                  </Col>\n                  <Col flex=\"0 0 80px\">\n                    <Item label=\"Chiều\" name={[field.name, 'evening']}>\n                      <Input type=\"number\" />\n                    </Item>\n                  </Col>\n                  <Col flex=\"0 0 80px\">\n                    <Item label=\"Tối\" name={[field.name, 'night']}>\n                      <Input type=\"number\" />\n                    </Item>\n                  </Col>\n                  <Col flex=\"0 0 80px\">\n                    <Item\n                      {...field}\n                      label=\"Số lượng\"\n                      name={[field.name, 'total']}\n                      fieldKey={[field.fieldKey, 'total']}>\n                      <Input type=\"number\" />\n                    </Item>\n                  </Col>\n                  <Col>\n                    <MinusCircleOutlined onClick={() => remove(field.name)} />\n                  </Col>\n                </Row>\n              ))\n\n            }\n            <Item>\n              <Button type=\"dashed\" block onClick={() => add()} icon={<PlusOutlined />}>Thêm đơn thuốc</Button>\n            </Item>\n          </>\n        )}\n      </List>\n\n      <div>\n        <Button htmlType=\"submit\" icon={<SaveOutlined />}>Lưu</Button>\n      </div>\n    </Form>\n  )\n}\n\nexport default VisitDrugForm;","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/user/disease-category`;\n\nexport function getDiseaseCategoryAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/user/service`;\n\nexport function getServicesAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}\n\nexport function getServiceDetailsAPI(id) {\n  const url = `${endpointPrefix}/${id}/`;\n  return axios.get(url);\n}","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/user/drug-category`;\n\nexport function getDrugCategoryAPI(search = \"\") {\n  const url = `${endpointPrefix}/?search=${search}`;\n  return axios.get(url);\n}","import axios from 'axios';\n\nimport { API_URL } from \"constant/apiUrl\";\n\nconst endpointPrefix = `${API_URL}/user/drug-instruction`;\n\nexport function getDrugInstructionsAPI() {\n  const url = `${endpointPrefix}/`;\n  return axios.get(url);\n}","import React from 'react';\nimport { Upload } from 'antd';\n\nconst VisitImagesForm = () => {\n  return (\n    <>\n      <Upload />\n    </>\n  )\n}\n\nexport default VisitImagesForm;","import React, { useState, useEffect } from 'react';\nimport { Tabs, Descriptions, Collapse, PageHeader, message, Divider, Button, Row, Col, Space } from 'antd';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport VisitLivingFunctionForm from 'forms/Visit/VisitLivingFunctionForm';\nimport VisitDiseaseForm from 'forms/Visit/VisitDiseaseForm';\nimport VisitServiceForm from 'forms/Visit/VisitServiceForm';\nimport VisitDrugForm from 'forms/Visit/VisitDrugForm';\nimport { getDiseaseCategoryAPI } from 'services/user/disease-category.service';\nimport { getServicesAPI } from 'services/user/medical-service.service';\nimport { getDrugCategoryAPI } from 'services/user/drug-category.service';\nimport { getDrugInstructionsAPI } from 'services/user/drug-instruction.service';\nimport { getDiseaseCategoryAPI as adminGetDiseaseCategoryAPI } from 'services/admin/disease-category.service';\nimport { getServicesAPI as adminGetServicesAPI } from 'services/admin/medical-service.service';\nimport { getDrugCategoryAPI as adminGetDrugCategoryAPI } from 'services/admin/drug-category.service';\nimport { getDrugInstructionsAPI as adminGetDrugInstructionsAPI } from 'services/admin/drug-instruction.service';\nimport { useHistory } from 'react-router-dom';\nimport { removeDuplicates } from 'utils/array';\nimport VisitImagesForm from 'forms/Visit/VisitImagesForm';\n\nconst ExaminationPage = props => {\n\n  const user = props.user;\n  const history = useHistory();\n\n  const [diseaseCategories, setDiseaseCategories] = useState([]);\n  const [services, setServices] = useState([]);\n  const [drugCategories, setDrugCategories] = useState([]);\n  const [drugInstructions, setDrugInstructions] = useState([]);\n\n  const [listEMR, setListEMR] = useState([]);\n\n  async function getDiseaseCategories() {\n    try {\n      let diseaseCategoryResponse;\n      if (user.role.name === \"admin\") {\n        diseaseCategoryResponse = await adminGetDiseaseCategoryAPI();\n      } else {\n        diseaseCategoryResponse = await getDiseaseCategoryAPI()\n      }\n      const diseaseCategoriesData = diseaseCategoryResponse.data;\n      setDiseaseCategories(diseaseCategoriesData);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function getServices() {\n    try {\n      let servicesResponse;\n      if (user.role.name === \"admin\") {\n        servicesResponse = await adminGetServicesAPI();\n      } else {\n        servicesResponse = await getServicesAPI()\n      }\n      const servicesData = servicesResponse.data;\n      setServices(servicesData);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function getDrugCategories() {\n    try {\n      let drugCategoryResponse;\n      if (user.role.name === \"admin\") {\n        drugCategoryResponse = await adminGetDrugCategoryAPI();\n      } else {\n        drugCategoryResponse = await getDrugCategoryAPI()\n      }\n      const drugCategoriesData = drugCategoryResponse.data;\n      setDrugCategories(drugCategoriesData);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function getDrugInstructions() {\n    try {\n      let drugInsResponse;\n      if (user.role.name === \"admin\") {\n        drugInsResponse = await adminGetDrugInstructionsAPI();\n      } else {\n        drugInsResponse = await getDrugInstructionsAPI()\n      }\n      const drugInsData = drugInsResponse.data;\n      setDrugInstructions(drugInsData);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function getInitialData() {\n    await Promise.all([\n      getDiseaseCategories(),\n      getServices(),\n      getDrugCategories(),\n      getDrugInstructions()\n    ]);\n  }\n\n  useEffect(() => {\n    if (user) {\n      getInitialData();\n    }\n\n    const localListEMRStr = localStorage.getItem(\"listEMR\");\n    const localListEMRObj = JSON.parse(localListEMRStr);\n    if (localListEMRObj) {\n      setListEMR(localListEMRObj);\n    }\n  }, [user]);\n\n  function handleSaveLivingFunctions(visitId, values) {\n    setListEMR(prevValue => {\n      const visit = prevValue.find(v => v.id === visitId);\n      visit.livingFunctions = values;\n      const newState = [...prevValue, ...[visit]];\n      const finalList = removeDuplicates(newState, \"id\");\n      localStorage.setItem(\"listEMR\", JSON.stringify(finalList));\n      message.success({ content: \"Lưu thành công\" });\n      return finalList;\n    })\n  }\n\n  function handleSaveDiseases(visitId, values) {\n    const visit = listEMR.find(v => v.id === visitId);\n    visit.emr_diseases = values.emr_diseases;\n    const newState = [...listEMR, ...[visit]];\n    const finalList = removeDuplicates(newState, \"id\");\n    localStorage.setItem(\"listEMR\", JSON.stringify(finalList));\n    setListEMR(prevValue => {\n      message.success({ content: \"Lưu thành công\" });\n      return finalList;\n    })\n  }\n\n  function handleSaveServices(visitId, values) {\n    setListEMR(prevValue => {\n      const visit = prevValue.find(v => v.id === visitId);\n      visit.emr_services = values.emr_services;\n      const newState = [...prevValue, ...[visit]];\n      const finalList = removeDuplicates(newState, \"id\");\n      localStorage.setItem(\"listEMR\", JSON.stringify(finalList));\n      message.success({ content: \"Lưu thành công\" });\n      return finalList;\n    })\n  }\n\n  function handleSaveDrugs(visitId, values) {\n    setListEMR(prevValue => {\n      const visit = prevValue.find(v => v.id === visitId);\n      visit.emr_drugs = values.emr_drugs;\n      const newState = [...prevValue, ...[visit]];\n      const finalList = removeDuplicates(newState, \"id\");\n      localStorage.setItem(\"listEMR\", JSON.stringify(finalList));\n      message.success({ content: \"Lưu thành công\" });\n      return finalList;\n    })\n  }\n\n  function handleFinishExamination(visitId) {\n    const visit = listEMR.find(v => v.id === visitId);\n    console.log(visit);\n  }\n\n  return (\n    <>\n      <PageHeader title=\"Khám bệnh\" onBack={() => history.goBack()} />\n      <Tabs type=\"card\">\n        {\n          listEMR.map(v => (\n            <Tabs.TabPane key={v.id} tab={`${v.patient.first_name} ${v.patient.last_name}`}>\n              <Descriptions title=\"Thông tin bệnh nhân\">\n                <Descriptions.Item span={1} label=\"Họ và tên\">\n                  {v.patient.first_name} {v.patient.last_name} ({v.patient.gender})\n                    </Descriptions.Item>\n                <Descriptions.Item span={1} label=\"Ngày sinh\">\n                  {v.patient.DOB}\n                </Descriptions.Item>\n              </Descriptions>\n\n              <Descriptions title={`Thông tin khám bệnh (Phòng khám: ${v.room})`}>\n                <Descriptions.Item span={1} label=\"Ngày vào khám\">{moment(v.created_at).format(\"DD/MM/YYYY HH:mm:ss\")}</Descriptions.Item>\n                <Descriptions.Item span={1} label=\"Bác sĩ khám bệnh\">\n                  {v.physician.first_name} {v.physician.last_name}\n                </Descriptions.Item>\n              </Descriptions>\n\n              <Collapse defaultActiveKey={[\"living-function\", \"diseases\", \"services\", \"drugs\", \"images\"]}>\n                <Collapse.Panel header=\"Chức năng sống\" key=\"living-function\">\n                  <VisitLivingFunctionForm\n                    onFinish={(values) => handleSaveLivingFunctions(v.id, values)}\n                    currentValues={v.livingFunctions} />\n                </Collapse.Panel>\n\n                <Collapse.Panel header=\"Bệnh\" key=\"diseases\">\n                  <VisitDiseaseForm\n                    categories={diseaseCategories}\n                    user={user}\n                    onFinish={(values) => handleSaveDiseases(v.id, values)}\n                    currentValues={v} />\n                </Collapse.Panel>\n                <Collapse.Panel header=\"Chỉ định dịch vụ\" key=\"services\">\n                  <VisitServiceForm\n                    user={user}\n                    services={services}\n                    onFinish={(values) => handleSaveServices(v.id, values)}\n                    currentValues={v} />\n                </Collapse.Panel>\n                <Collapse.Panel header=\"Kê đơn thuốc\" key=\"drugs\">\n                  <VisitDrugForm\n                    user={user}\n                    categories={drugCategories}\n                    instructions={drugInstructions}\n                    onFinish={(values) => handleSaveDrugs(v.id, values)}\n                    currentValues={v} />\n                </Collapse.Panel>\n                <Collapse.Panel header=\"Hình ảnh\" key=\"images\">\n                  <VisitImagesForm />\n                </Collapse.Panel>\n              </Collapse>\n\n              <Divider />\n              <div className=\"text-right\">\n                <Space>\n                  <Button danger size=\"large\">Hủy đơn</Button>\n                  <Button type=\"primary\" size=\"large\" onClick={() => handleFinishExamination(v.id)}>Kết thúc khám</Button>\n                </Space>\n              </div>\n            </Tabs.TabPane>\n          ))\n        }\n\n      </Tabs>\n    </>\n  )\n}\n\nconst mapStateToProps = state => ({\n  user: state.userState.user\n})\n\nexport default connect(mapStateToProps)(ExaminationPage);","import React from 'react';\n\nconst ProfilePage = props => {\n  return (\n    <div>Profile Page</div>\n  )\n}\n\nexport default ProfilePage;","import React, { useState, useEffect } from 'react';\nimport { PageHeader, Descriptions, Spin } from 'antd';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\n\n// APIs\nimport { getPatientDetailsAPI } from 'services/user/patient.service';\nimport { listEMRAPI } from 'services/user/emr.service';\n\nconst { Item } = Descriptions;\n\nconst PatientDetails = props => {\n\n  const { goBack } = useHistory();\n  const { params } = useRouteMatch();\n  const patientId = params.patientId;\n\n  const [patient, setPatient] = useState(null);\n  const [patientLoading, setPatientLoading] = useState(false);\n  const [EMRs, setEMRs] = useState([]);\n  const [EMRLoading, setEMRLoading] = useState(false);\n\n  async function getPatientDetails(patientId) {\n    try {\n      setPatientLoading(true);\n      const patientResponse = await getPatientDetailsAPI(patientId);\n      setPatient(patientResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setPatientLoading(false);\n    }\n  }\n\n  async function getPatientEMRs(patientId) {\n    try {\n      setEMRLoading(true);\n      const EMRResponse = await listEMRAPI({ patient_id: patientId });\n      console.log(EMRResponse);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setEMRLoading(false);\n    }\n  }\n\n  async function getInitialData() {\n    await Promise.all([\n      getPatientDetails(patientId),\n      getPatientEMRs(patientId)\n    ])\n  }\n\n  useEffect(() => {\n    getInitialData();\n  }, []);\n\n  return (\n    <>\n      <PageHeader onBack={goBack} title={patient ? patient.first_name + \" \" + patient.last_name : \"Chi tiết bệnh nhân\"} />\n\n      <Spin spinning={patientLoading}>\n        <Descriptions title=\"Thông tin cá nhân\" colon>\n          <Item label=\"Họ và tên\">{patient ? patient.first_name + \" \" + patient.last_name : \"Đang tải...\"}</Item>\n          <Item label=\"Giới tính\">{patient?.gender || \"Đang tải\"}</Item>\n          <Item label=\"Ngày sinh\">{patient?.DOB || \"Đang tải\"}</Item>\n          <Item label=\"Điện thoại\">{patient?.phone || \"Đang tải\"}</Item>\n          <Item label=\"Địa chỉ\">{patient?.address || \"Đang cập nhật\"}</Item>\n        </Descriptions>\n      </Spin>\n\n      <div className=\"ant-descriptions-title\">Lịch sử khám bệnh</div>\n\n    </>\n  )\n}\n\nexport default PatientDetails;","import React from 'react';\nimport { Link, Redirect, Switch, Route, useRouteMatch, useLocation } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport {\n  UserOutlined,\n  DashboardOutlined,\n  MedicineBoxOutlined,\n  BugOutlined,\n  DollarOutlined,\n  IdcardOutlined,\n  AppstoreOutlined,\n  CalendarOutlined,\n  ContainerOutlined,\n  SettingOutlined,\n  ProfileOutlined,\n  NotificationOutlined} from '@ant-design/icons';\nimport AdminDashboard from 'pages/admin/dashboard';\nimport DrugCategoryPage from 'pages/common/drug/drug-category';\nimport DrugUnitPage from 'pages/common/drug/drug-unit';\nimport DrugPage from 'pages/common/drug/drug';\nimport DrugInstructionPage from 'pages/common/drug/drug-instruction';\nimport DiseaseCategory from 'pages/common/disease/disease-category';\nimport DiseasePage from 'pages/common/disease/disease';\nimport NotificationPage from 'pages/common/notification/notification';\nimport VisitPage from 'pages/common/visit/visit';\nimport PatientPage from 'pages/common/patient/patient';\nimport AppointmentPage from 'pages/common/appointment/apointment';\nimport ServicePage from 'pages/common/service/service';\nimport RoomPage from 'pages/common/room/room';\nimport AdminAccountPage from 'pages/admin/account';\nimport AdminSettingPage from 'pages/admin/setting';\nimport withPrivateRoute from 'HOCs/withPrivateRoute';\nimport CustomHeader from 'components/Header';\nimport ExaminationPage from 'pages/common/examination/examination';\nimport ProfilePage from 'pages/common/profile/profile';\nimport PatientDetails from 'pages/common/patient/patient-details';\n\nconst { Sider, Content } = Layout;\nconst { SubMenu } = Menu;\n\nconst PhysicianLayout = () => {\n  const match = useRouteMatch();\n  const location = useLocation();\n  const path = match.path;\n\n  return (\n    <Layout>\n      <CustomHeader />\n      <Layout>\n        <Sider width={200} className=\"site-layout-background\">\n          <Menu\n            mode=\"inline\"\n            style={{ height: '100%', borderRight: 0 }}\n            selectedKeys={[location.pathname]}\n          >\n\n            <Menu.Item key=\"/physician/notification\" icon={<NotificationOutlined />}>\n              <Link to=\"/physician/notification\">Thông báo</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/physician/visit\" icon={<ContainerOutlined />}>\n              <Link to=\"/physician/visit\">Khám bệnh</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/physician/patient\" icon={<IdcardOutlined />}>\n              <Link to=\"/physician/patient\">Bệnh nhân</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/physician/appointment\" icon={<CalendarOutlined />}>\n              <Link to=\"/physician/appointment\">Lịch hẹn</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/physician/profile\" icon={<ProfileOutlined />}>\n              <Link to=\"/physician/profile\">Hồ sơ</Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout style={{ padding: '0 24px 24px' }}>\n          <Content\n            className=\"site-layout-background\"\n            style={{\n              padding: 24,\n              margin: 0,\n              minHeight: 280,\n            }}\n          >\n            <Switch>\n\n              {/* Notification */}\n              <Route path={`${path}/notification`}>\n                <NotificationPage />\n              </Route>\n\n              {/* Visit */}\n              <Route path={`${path}/visit`} exact>\n                <VisitPage />\n              </Route>\n\n              <Route path={`${path}/visit/examination`}>\n                <ExaminationPage />\n              </Route>\n\n              {/* Patient */}\n              <Route path={`${path}/patient`} exact>\n                <PatientPage />\n              </Route>\n              \n              <Route path={`${path}/patient/:patientId`}>\n                <PatientDetails />\n              </Route>\n\n              {/* Appointment */}\n              <Route path={`${path}/appointment`}>\n                <AppointmentPage />\n              </Route>\n\n              <Route path={`${path}/profile`}>\n                <ProfilePage />\n              </Route>\n\n              {/* Fallback */}\n              <Redirect to={`/physician/notification`} />\n            </Switch>\n          </Content>\n        </Layout>\n      </Layout>\n    </Layout>\n  )\n}\n\nexport default withPrivateRoute(PhysicianLayout, ['physician']);","import React from 'react';\nimport { Form, Input } from 'antd';\n\nconst PatientForm = props => {\n  const { form, onFinish } = props;\n\n  return (\n    <Form\n      layout=\"vertical\"\n      onFinish={onFinish}\n      form={form}>\n      <Form.Item label=\"Tên bệnh nhân\">\n        <Input />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default PatientForm;","import React, { useState, useEffect } from 'react';\nimport { Input, Table, Form, PageHeader, Button, Modal, Menu, Dropdown } from 'antd';\nimport { listAllPatientsAPI } from 'services/user/patient.service';\nimport { PlusOutlined } from '@ant-design/icons';\nimport PatientForm from 'forms/PatientForm/PatientForm';\nimport { getRoomAPI } from 'services/user/room.service';\nimport { createVisitAPI } from 'services/user/visit.service';\n\nconst ReceivePage = props => {\n\n  const [patientData, setPatientData] = useState(null);\n  const [patientLoading, setPatientLoading] = useState(false);\n  const [rooms, setRooms] = useState(null);\n  const [roomLoading, setRoomLoading] = useState(false);\n  const [roomModalVisible, setRoomModalVisible] = useState(false);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [isCreatingVisit, setCreatingVisit] = useState(false);\n  const [patientForm] = Form.useForm();\n\n  function renderMenu(patientId) {\n    return (\n      <Menu>\n        {\n          rooms?.map(room => (\n            <Menu.Item key={room.id} onClick={() => handleCreateVisit(patientId, room.id)}>{room.name}</Menu.Item>\n          ))\n        }\n      </Menu>\n    )\n  }\n\n  const tableColumns = [\n    {\n      title: '#',\n      key: 'index',\n      render: (text, record, index) => index + 1\n    },\n    {\n      title: 'Họ và tên',\n      key: 'fullname',\n      render: (text, { first_name, last_name }) => first_name + ' ' + last_name\n    },\n    {\n      title: 'Giới tính',\n      key: 'gender',\n      dataIndex: 'gender'\n    },\n    {\n      title: 'Ngày sinh',\n      key: 'DOB',\n      dataIndex: 'DOB'\n    },\n    {\n      title: 'Điện thoại',\n      key: 'phone',\n      dataIndex: 'phone'\n    },\n    {\n      title: 'Hành động',\n      key: 'action',\n      render: (text, record) => (\n        <Dropdown overlay={renderMenu(record.id)} overlayStyle={{ minWidth: 200 }} trigger=\"click\">\n          <Button>Tiếp nhận</Button>\n        </Dropdown>\n      )\n    }\n  ]\n\n\n  //\n  // Load initial data\n  //\n  async function listAllPatients(search) {\n    try {\n      setPatientLoading(true);\n      const patientResponse = await listAllPatientsAPI(search);\n      setPatientData(patientResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setPatientLoading(false);\n    }\n  }\n\n  async function getRooms() {\n    try {\n      setRoomLoading(true);\n      const roomResponse = await getRoomAPI();\n      setRooms(roomResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setRoomLoading(false);\n    }\n  }\n\n  async function getInitialData() {\n    await Promise.all([\n      listAllPatients(),\n      getRooms()\n    ])\n  }\n\n  useEffect(() => {\n    getInitialData();\n  }, []);\n\n  //\n  // Component functions\n  //\n  function handleAddClick() {\n    setModalVisible(true);\n  }\n\n  function handleCloseModal() {\n    setModalVisible(false);\n  }\n\n  function handleSearch(values) {\n    listAllPatients(values.search);\n  }\n\n  function handleSubmit() {\n\n  }\n\n  function handleReceiveClick(patientId) {\n    setRoomModalVisible(true);\n  }\n\n  async function handleCreateVisit(patientId, roomId) {\n    try {\n      setCreatingVisit(true);\n      const createVisitResponse = await createVisitAPI({ patientId, roomId });\n      console.log(createVisitResponse.data);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setCreatingVisit(false);\n    }\n  }\n\n  return (\n    <>\n      <PageHeader\n        title=\"Tiếp nhận bệnh nhân\"\n        className=\"pl-0\"\n        extra={<Button type=\"primary\" onClick={handleAddClick} icon={<PlusOutlined />}>Bệnh nhân mới</Button>} />\n\n      <Form onFinish={handleSearch}>\n        <Form.Item name=\"search\">\n          <Input.Search size=\"large\" placeholder=\"Tìm kiếm bệnh nhân theo tên/SĐT\" />\n        </Form.Item>\n      </Form>\n      <Table\n        rowKey=\"id\"\n        dataSource={patientData?.results}\n        loading={patientLoading || isCreatingVisit}\n        columns={tableColumns} />\n      <Modal\n        visible={modalVisible}\n        onCancel={handleCloseModal}\n        destroyOnClose={true}\n        title=\"Bệnh nhân mới\">\n        <PatientForm form={patientForm} onFinish={handleSubmit} />\n      </Modal>\n    </>\n  )\n}\n\nexport default ReceivePage;","import React from 'react';\nimport { Link, Redirect, Switch, Route, useRouteMatch, useLocation } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport {\n  UserOutlined,\n  DashboardOutlined,\n  CalendarOutlined,\n} from '@ant-design/icons';\nimport AppointmentPage from 'pages/common/appointment/apointment';\nimport withPrivateRoute from 'HOCs/withPrivateRoute';\nimport CustomHeader from 'components/Header';\nimport ReceivePage from 'pages/receptionist/receive';\nimport ProfilePage from 'pages/common/profile/profile';\n\nconst { Sider, Content } = Layout;\n\nconst ReceptionistLayout = () => {\n  const match = useRouteMatch();\n  const location = useLocation();\n  const path = match.path;\n\n  return (\n    <Layout>\n      <CustomHeader />\n      <Layout>\n        <Sider width={200} className=\"site-layout-background\">\n          <Menu\n            mode=\"inline\"\n            style={{ height: '100%', borderRight: 0 }}\n            selectedKeys={[location.pathname]}\n          >\n            <Menu.Item key=\"/receptionist/receive\" icon={<DashboardOutlined />}>\n              <Link to=\"/receptionist/receive\">Tiếp đón</Link>\n            </Menu.Item>\n            <Menu.Item key=\"/receptionist/appointment\" icon={<CalendarOutlined />}>\n              <Link to=\"/receptionist/appointment\">Lịch hẹn</Link>\n            </Menu.Item>\n\n            <Menu.Item key=\"/receptionist/profile\" icon={<UserOutlined />}>\n              <Link to=\"/receptionist/profile\">Hồ sơ</Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout style={{ padding: '0 24px 24px' }}>\n          <Content\n            className=\"site-layout-background\"\n            style={{\n              padding: 24,\n              margin: 0,\n              minHeight: 280,\n            }}\n          >\n            <Switch>\n              {/* Dashboard */}\n              <Route path={`${path}/receive`}>\n                <ReceivePage />\n              </Route>\n\n              {/* Appointment */}\n              <Route path={`${path}/appointment`}>\n                <AppointmentPage />\n              </Route>\n\n              <Route path={`${path}/profile`}>\n                <ProfilePage />\n              </Route>\n\n              {/* Fallback */}\n              <Redirect to={`/receptionist/receive`} />\n            </Switch>\n          </Content>\n        </Layout>\n      </Layout>\n    </Layout>\n  )\n}\n\nexport default withPrivateRoute(ReceptionistLayout, ['receptionist']);","import React from 'react';\n\nconst EmailIcon = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" id=\"Capa_1\" enableBackground=\"new 0 0 512 512\" height=\"50\" viewBox=\"0 0 512 512\" width=\"50\"><g><g><path d=\"m497 15.243h-482c-8.284 0-15 6.716-15 15v330c0 8.284 6.716 15 15 15h121.019c-.006.505-.019 1.008-.019 1.515 0 66.168 53.832 120 120 120s120-53.832 120-120c0-.506-.013-1.01-.019-1.515h121.019c8.284 0 15-6.716 15-15v-330c0-8.285-6.716-15-15-15zm-43.122 30-197.878 147.792-197.878-147.792zm-197.878 421.514c-49.626 0-90-40.374-90-90s40.374-90 90-90 90 40.374 90 90-40.374 90-90 90zm226-121.514h-110.208c-13.876-50.929-60.527-88.485-115.792-88.485-55.266 0-101.916 37.557-115.792 88.485h-110.208v-283.56l217.024 162.092c2.662 1.988 5.819 2.982 8.976 2.982s6.314-.994 8.976-2.982l217.024-162.092zm-191.606 5.908-49.394 49.393-19.394-19.393c-5.857-5.858-15.355-5.858-21.213 0s-5.858 15.355 0 21.213l30 30c2.929 2.929 6.768 4.394 10.606 4.394s7.678-1.464 10.606-4.394l60-60c5.858-5.858 5.858-15.355 0-21.213-5.856-5.859-15.354-5.859-21.211 0z\" fill=\"currentColor\" /></g></g></svg>\n)\n\nexport default EmailIcon;","import React, { useState, useEffect } from 'react';\nimport EmailIcon from 'components/Icons/EmailIcon';\nimport Icon from '@ant-design/icons';\nimport { Alert, Button, Space, Spin } from 'antd';\nimport { Link, useLocation } from 'react-router-dom';\nimport { verifyEmailAPI } from 'services/auth/auth.service';\n\nconst VerifyPage = (props) => {\n\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(null);\n  const { search } = useLocation();\n  const urlSearchParams = new URLSearchParams(search);\n  const token = urlSearchParams.get('token');\n\n  function isValidToken(token = \"\") {\n    const isValid = /[A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*/.test(token);\n    console.log(isValid);\n    return isValid;\n  }\n\n  async function verifyEmail(token) {\n    try {\n      setLoading(true);\n      await verifyEmailAPI(token);\n      setSuccess(true);\n    } catch (error) {\n      setError(error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if (token && token.length > 0 && isValidToken(token)) {\n      verifyEmail(token);\n    }\n  }, [search, token]);\n\n  return (\n    <main className=\"login-page\">\n      <div className=\"auth\">\n        <div className=\"auth__header text-center\">\n          <Icon component={EmailIcon} />\n          <h1 className=\"text-3xl\">Xác thực email</h1>\n        </div>\n\n        {\n          loading &&\n          <Space align=\"center\" className=\"flex text-center justify-center\">\n            <Spin />\n            <span>Vui lòng đợi</span>\n          </Space>\n        }\n\n        {\n          success &&\n          <Alert\n            showIcon\n            type=\"success\"\n            message=\"Xác thực địa chỉ email thành công\"\n          />\n        }\n\n        {\n          !isValidToken(token) &&\n          <Alert\n            showIcon\n            type=\"error\"\n            message=\"URL không hợp lệ\"\n          />\n        }\n\n        {\n          !!error &&\n          <Alert\n            showIcon\n            type=\"error\"\n            message={error?.response?.data.message || \"Có lỗi khi xác thực email, vui lòng thử lại\"}\n          />\n        }\n\n        <div className=\"text-center mt-5\">\n          <Button type=\"link\">\n            <Link to=\"/\">Về trang chủ</Link>\n          </Button>\n        </div>\n      </div>\n    </main>\n  )\n}\n\nexport default VerifyPage;","import React, { useEffect } from 'react';\nimport { Route, HashRouter as Router, Switch, Redirect  } from 'react-router-dom';\nimport LoginPage from 'pages/login';\nimport Cookie from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\nimport AdminLayout from 'layouts/AdminLayout/AdminLayout';\nimport PhysicianLayout from 'layouts/PhysicianLayout/PhysicianLayout';\nimport ReceptionistLayout from 'layouts/ReceptionistLayout/ReceptionistLayout';\nimport setupInterceptor from 'utils/interceptor';\nimport { useDispatch } from 'react-redux';\nimport { getProfileAction } from 'store/actions/user.action';\nimport { refreshToken } from 'services/auth/auth.service';\nimport moment from 'moment';\nimport 'moment/locale/vi';\n\n// import \"normalize.css/normalize.css\";\n// import \"@blueprintjs/core/lib/css/blueprint.css\";\n// import \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport 'antd/dist/antd.css';\nimport 'styles/main.scss';\nimport VerifyPage from 'pages/verify-email';\n\nmoment.locale('vi');\n\n\nfunction App() {\n\n  setupInterceptor();\n\n  const dispatch = useDispatch();\n\n  function fetchProfile() {\n    try {\n      const token = Cookie.get('EMR_token');\n      if (token && jwtDecode(token)) {\n        dispatch(getProfileAction());\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function checkRefresh() {\n    try {\n      const token = Cookie.get('EMR_token');\n      const refresh = Cookie.get('EMR_refresh');\n      if (!token && refresh) {\n        const newTokenReponse = await refreshToken(refresh);\n        const newToken = newTokenReponse.data;\n        Cookie.set('EMR_token', newToken.access_token, { expires: 3/24 });\n      }\n      fetchProfile();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    checkRefresh();\n  });\n  \n  return (\n    <div className=\"app\">\n      <Router>\n        <Switch>\n          <Route path=\"/login\" component={LoginPage} />\n          <Route path=\"/verify-email\" component={VerifyPage} />\n\n          <Route path=\"/admin\" component={AdminLayout} />\n          <Route path=\"/physician\" component={PhysicianLayout} />\n          <Route path=\"/receptionist\" component={ReceptionistLayout} />\n\n          <Redirect to=\"/login\" />\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import axios from 'axios';\nimport { message } from 'antd';\nimport Cookie from 'js-cookie';\nimport * as AuthService from 'services/auth/auth.service';\nimport jwtDecode from 'jwt-decode';\nimport { API_URL } from 'constant/apiUrl';\n\nexport default function setupInterceptor() {\n  axios.interceptors.request.use((config) => {\n\n    if (config.method === 'delete') {\n      message.loading('Đang thực hiện');\n    }\n\n    try {\n      const token = Cookie.get('EMR_token');\n      if (token && jwtDecode(token)) {\n        config.headers['Authorization'] = `Bearer ${token}`;\n      }\n    } catch (error) {\n      console.log({ error });\n    }\n    return config;\n  }, (error) => Promise.reject(error));\n\n  axios.interceptors.response.use(((res) => {\n    switch (res.config.method) {\n      case \"post\":\n        if (res.data.id) {\n          // Check if new object created because login is also a post request\n          message.success({\n            content: \"Thao tác thành công\"\n          });\n        }\n\n        break;\n      case \"put\":\n      case \"patch\":\n        message.success({\n          content: \"Cập nhật thành công\"\n        });\n        break;\n      case \"delete\":\n        message.destroy();\n        message.success({\n          content: \"Xóa thành công\"\n        });\n        break;\n      default:\n      // Do nothing\n    }\n    return res;\n  }), async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response.status === 401 && !originalRequest._retry && originalRequest.url !== `${API_URL}/auth/refresh-token/`) {\n      Cookie.remove(\"EMR_token\");\n\n      originalRequest._retry = true;\n\n      let refreshToken = Cookie.get('EMR_refresh');\n\n      if (refreshToken && refreshToken.length > 0) {\n        try {\n          const refreshResponse = await AuthService.refreshToken(refreshToken);\n          const newToken = refreshResponse.data.access_token;\n          Cookie.set('EMR_token', newToken);\n\n          const config = error.config;\n          config.headers['Authorization'] = `Bearer ${newToken}`;\n\n          return new Promise((resolve, reject) => {\n            return axios.request(config)\n              .then(res => resolve(res))\n              .catch(error => reject(error))\n          })\n        } catch (error) {\n          Cookie.remove(\"EMR_refresh\");\n          return Promise.reject(error);\n        }\n      }\n    } else {\n      // Do not show error alert on veirfy email page because it already have its own error messages\n      if (!originalRequest.url.includes('/api/auth/verify-email')) {\n        const errorMessage = error.response?.data.message || \"Unexpected error occurred\";\n        message.error(errorMessage);\n      }\n\n    }\n\n    return Promise.reject(error);\n  })\n}","import * as actionTypes from '../actionTypes';\n\nconst initialState = {\n  loginLoading: false\n}\n\nexport default function authReducer (state = initialState, action) {\n  switch(action.type) {\n    case actionTypes.LOGIN_PENDING:\n      return {\n        ...state,\n        loginLoading: true\n      }\n\n    case actionTypes.LOGIN_SUCCESS:\n      return {\n        ...state,\n        loginLoading: false\n      }\n\n    case actionTypes.LOGIN_FAILURE:\n      return {\n        ...state,\n        loginLoading: false\n      }\n\n    default:\n      return {\n        ...state\n      }\n  }\n}","import * as actionTypes from '../actionTypes';\n\nconst initialState = {\n  user: null,\n  getProfileLoading: false,\n}\n\nexport default function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case actionTypes.GET_PROFILE_PENDING:\n      return {\n        ...state,\n        user: null,\n        getProfileLoading: true\n      }\n    case actionTypes.GET_PROFILE_SUCCESS:\n      return {\n        ...state,\n        user: action.payload,\n        getProfileLoading: false\n      }\n    case actionTypes.GET_PROFILE_FAILURE:\n      return {\n        ...state,\n        user: null,\n        getProfileLoading: false\n      }\n    \n    case actionTypes.LOGOUT:\n      return {\n        ...state,\n        user: null,\n        getProfileLoading: false\n      }\n    default:\n      return { ...state }\n  }\n}","import { combineReducers } from 'redux';\nimport authReducer from './reducers/auth.reducer';\nimport userReducer from './reducers/user.reducer';\n\nconst rootReducer = combineReducers({\n  userState: userReducer,\n  authState: authReducer\n})\n\nexport default rootReducer;","import { createStore, compose, applyMiddleware } from 'redux';\nimport rootReducer from './rootReducer';\nimport thunk from 'redux-thunk';\n\nconst middlewares = [thunk]\n\nconst composeEnhancers =\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : compose;\n\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(...middlewares)));\n\nexport default store;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from 'store/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport { ConfigProvider } from 'antd';\nimport viVN from 'antd/lib/locale/vi_VN';\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConfigProvider locale={viVN}>\n      <App />\n    </ConfigProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}