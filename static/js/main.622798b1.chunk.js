(this["webpackJsonpemr-client-js"]=this["webpackJsonpemr-client-js"]||[]).push([[0],{205:function(e,t,c){},325:function(e,t,c){},363:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c(0),a=c(26),i=c.n(a),s=(c(205),c(35)),j=c.n(s),o=c(47),b=c(38),d=c(39),l=c(7),u=c(369),h=c(371),x=c(48),O=c(364),m=function(){return Object(n.jsxs)("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512.002 512.002",fill:"currentColor",xmlSpace:"preserve",children:[Object(n.jsx)("g",{children:Object(n.jsx)("g",{children:Object(n.jsxs)("g",{children:[Object(n.jsx)("circle",{cx:"338",cy:"346.001",r:"20"}),Object(n.jsx)("path",{d:"M238,472.001H80c-22.056,0-40-17.944-40-40v-164c0-22.056,17.944-40,40-40h288c22.056,0,40,17.944,40,40v40     c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20v-40c0-44.112-35.888-80-80-80h-24.037v-70.534     c0-64.771-53.832-117.466-120-117.466s-120,52.695-120,117.466v70.534H80c-44.112,0-80,35.888-80,80v164     c0,44.112,35.888,80,80,80h158c11.046,0,20-8.954,20-20S249.046,472.001,238,472.001z M143.963,117.467     c0-42.715,35.888-77.466,80-77.466s80,34.751,80,77.466v70.534h-160V117.467z"}),Object(n.jsx)("path",{d:"M503.643,325.739c-8.982-6.431-21.477-4.362-27.904,4.62l-98.581,137.7c-2.692,3.122-6.066,3.796-7.874,3.916     c-1.854,0.123-5.424-0.112-8.567-3.061l-63.708-62.171c-7.906-7.716-20.568-7.559-28.282,0.345     c-7.715,7.905-7.561,20.567,0.345,28.282l63.82,62.281c0.06,0.058,0.119,0.116,0.18,0.173C342.639,506.933,355.41,512,368.55,512     c1.129,0,2.261-0.037,3.393-0.113c14.314-0.954,27.679-7.915,36.666-19.097c0.232-0.29,0.456-0.585,0.673-0.887l98.981-138.26     C514.692,344.662,512.624,332.168,503.643,325.739z"}),Object(n.jsx)("circle",{cx:"262",cy:"346.001",r:"20"}),Object(n.jsx)("circle",{cx:"112",cy:"346.001",r:"20"}),Object(n.jsx)("circle",{cx:"187",cy:"346.001",r:"20"})]})})}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{}),Object(n.jsx)("g",{})]})},p="https://emr-2020.wl.r.appspot.com/api",g=c(64),f=c.n(g),v="".concat(p,"/auth");function k(e,t){var c="".concat(v,"/login/");return f.a.post(c,{email:e,password:t})}function y(e){var t="".concat(v,"/refresh-token/");return f.a.post(t,{refresh_token:e})}var w=c(43),_=c.n(w),E="".concat(p,"/user");function I(){var e="".concat(E,"/profile/");return f.a.get(e)}var S=c(55),N="SET_USER",M="REMOVE_USER";function R(e){return{type:N,payload:e}}function P(){return _.a.remove("EMR_access"),_.a.remove("EMR_refresh"),{type:M}}var T=function(e){var t=Object(d.g)(),c=Object(r.useState)(!1),a=Object(l.a)(c,2),i=a[0],s=a[1],p=Object(S.b)();function g(){return(g=Object(o.a)(j.a.mark((function e(c){var n,r,a,i,o,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,k(c.email,c.password);case 4:return n=e.sent,r=n.data,a=r.access_token,i=r.refresh_token,console.log(r),_.a.set("EMR_token",a,{expires:3/24}),_.a.set("EMR_refresh",i,{expires:7}),e.next=13,I();case 13:o=e.sent,b=o.data,p(R(b)),e.t0=b.role.id,e.next=1===e.t0?19:2===e.t0?21:3===e.t0?23:25;break;case 19:return t.replace("/admin"),e.abrupt("break",26);case 21:return t.replace("/physician"),e.abrupt("break",26);case 23:return t.replace("/receiptionist"),e.abrupt("break",26);case 25:return e.abrupt("return",t.replace("/user"));case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(0),console.log(e.t1);case 31:return e.prev=31,s(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,28,31,34]])})))).apply(this,arguments)}return Object(n.jsxs)(u.a,{className:"login-form",layout:"vertical",autoComplete:"off",onFinish:function(e){return g.apply(this,arguments)},children:[Object(n.jsx)("div",{className:"text-center",children:Object(n.jsxs)("div",{className:"login-form__header",children:[Object(n.jsx)(O.a,{component:m}),Object(n.jsx)("h1",{className:"text-3xl",children:"\u0110\u0103ng nh\u1eadp"})]})}),Object(n.jsx)(u.a.Item,{name:"email",children:Object(n.jsx)(h.a,{type:"email",placeholder:"Email"})}),Object(n.jsx)(u.a.Item,{name:"password",className:"m-0",children:Object(n.jsx)(h.a.Password,{placeholder:"M\u1eadt kh\u1ea9u"})}),Object(n.jsx)(b.b,{className:"block mt-2 mb-6",to:"/forgot-password",children:"Qu\xean m\u1eadt kh\u1ea9u"}),Object(n.jsx)(u.a.Item,{children:Object(n.jsx)(x.a,{loading:i,block:!0,type:"primary",size:"large",htmlType:"submit",children:"\u0110\u0103ng nh\u1eadp"})})]})},C=function(e){return Object(n.jsx)("main",{className:"login-page",children:Object(n.jsx)(T,{})})},D=c(100),B=(c(324),c(325),c(367)),z=c(85),A=c(370),L=c(374),H=c(375),U=c(376),V=c(377),X=c(378),F=c(379),Q=c(380),W=c(381),q=c(382),J=c(383),K=c(384),G=c(385),$=c(386),Y=c(387),Z=function(){return Object(n.jsx)("div",{children:"Admin dashboard"})},ee=c(365),te=c(366),ce=c(368),ne=c(373),re=function(){return Object(n.jsx)(u.a,{children:Object(n.jsx)(u.a.Item,{label:"T\xean",children:Object(n.jsx)(h.a,{})})})},ae=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),c=t[0],a=t[1],i=Object(r.useState)([]),s=Object(l.a)(i,2),j=s[0];s[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(ee.a,{justify:"space-between",children:[Object(n.jsx)(te.a,{children:Object(n.jsx)("h1",{className:"text-xl",children:"Lo\u1ea1i thu\u1ed1c"})}),Object(n.jsx)(te.a,{children:Object(n.jsx)(x.a,{type:"primary",icon:Object(n.jsx)(ne.a,{}),onClick:function(){a(!0)},children:"T\u1ea1o m\u1edbi"})})]}),Object(n.jsx)(ce.a,{columns:[{title:"#",key:"#",render:function(e,t,c){return c}},{title:"T\xean",key:"name",dataIndex:"name"}],dataSource:j}),Object(n.jsx)(A.a,{visible:c,title:"Th\xeam lo\u1ea1i thu\u1ed1c",onCancel:function(){a(!1)},children:Object(n.jsx)(re,{})})]})},ie=function(){return Object(n.jsx)(u.a,{children:Object(n.jsx)(u.a.Item,{label:"T\xean",children:Object(n.jsx)(h.a,{})})})},se=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(ee.a,{justify:"space-between",children:[Object(n.jsx)(te.a,{children:Object(n.jsx)("h1",{className:"text-xl",children:"\u0110\u01a1n v\u1ecb t\xednh"})}),Object(n.jsx)(te.a,{children:Object(n.jsx)(x.a,{type:"primary",icon:Object(n.jsx)(ne.a,{}),onClick:function(){a(!0)},children:"T\u1ea1o m\u1edbi"})})]}),Object(n.jsx)(A.a,{visible:c,title:"Th\xeam \u0111\u01a1n v\u1ecb t\xednh",onCancel:function(){a(!1)},children:Object(n.jsx)(ie,{})})]})},je=function(){return Object(n.jsx)("div",{children:"Drug Page"})},oe=function(){return Object(n.jsx)("div",{children:"Drug Instruction"})},be=function(){return Object(n.jsx)("div",{children:"Disease category page"})},de=function(){return Object(n.jsx)("div",{children:"Disease Page"})},le=function(){return Object(n.jsx)("div",{children:"Notification Page"})},ue=function(){return Object(n.jsx)("div",{children:"Visit page"})},he=function(){return Object(n.jsx)("div",{children:"Patient page"})},xe=function(){return Object(n.jsx)("div",{children:"Appointment Page"})},Oe=function(){return Object(n.jsx)("div",{children:"Service Page"})},me=function(){return Object(n.jsx)("div",{children:"WorkingHour Page"})},pe=function(){return Object(n.jsx)("div",{children:"RoomPage"})},ge=function(){return Object(n.jsx)("div",{children:"Account Page"})},fe=function(){return Object(n.jsx)("div",{children:"Admin setting page"})},ve=c(1),ke=c(100),ye=function(e,t){return function(c){var r=Object(S.b)(),a=_.a.get("EMR_token"),i=Object(S.c)((function(e){return e.userState.user}));try{if(!a||0===a.length||!ke(a))return Object(n.jsx)(d.a,{to:"/login"});if(!function(){var e=i.role.name,c=t.includes(e);return console.log(c),c}())return r(P()),Object(n.jsx)(d.a,{to:"/login"})}catch(s){console.log(s)}return Object(n.jsx)(e,Object(ve.a)({},c))}},we=B.a.Header,_e=B.a.Sider,Ee=B.a.Content,Ie=(z.a.Item,z.a.SubMenu),Se=(z.a.Divider,A.a.confirm,ye((function(e){var t=Object(d.i)(),c=Object(d.h)(),r=Object(d.g)(),a=Object(S.b)(),i=t.path,s=Object(S.c)((function(e){return e.userState.user}));return Object(n.jsxs)(B.a,{children:[Object(n.jsxs)(we,{className:"header flex items-center",children:[Object(n.jsx)(b.b,{to:"/",className:"text-2xl text-white",children:"EMR"}),Object(n.jsx)("div",{className:"ml-auto"}),Object(n.jsxs)(x.a,{type:"default",ghost:!0,icon:Object(n.jsx)(H.a,{}),className:"border-none",children:[null===s||void 0===s?void 0:s.first_name," ",null===s||void 0===s?void 0:s.last_name]}),Object(n.jsx)(x.a,{type:"default",ghost:!0,icon:Object(n.jsx)(U.a,{}),className:"border-none",onClick:function(){A.a.confirm({title:"\u0110\u0103ng xu\u1ea5t",icon:Object(n.jsx)(L.a,{}),content:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n \u0111\u0103ng xu\u1ea5t kh\xf4ng?",onOk:function(){return Object(o.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(P());case 2:r.replace("/login");case 3:case"end":return e.stop()}}),e)})))()}})},children:"\u0110\u0103ng xu\u1ea5t"})]}),Object(n.jsxs)(B.a,{children:[Object(n.jsx)(_e,{width:200,className:"site-layout-background",children:Object(n.jsxs)(z.a,{mode:"inline",style:{height:"100%",borderRight:0},selectedKeys:[c.pathname],children:[Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(V.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/dashboard",children:"B\u1ea3ng \u0111i\u1ec1u khi\u1ec3n"})},"/admin/dashboard"),Object(n.jsxs)(Ie,{icon:Object(n.jsx)(X.a,{}),title:"Qu\u1ea3n l\xfd thu\u1ed1c",children:[Object(n.jsx)(z.a.Item,{children:Object(n.jsx)(b.b,{to:"/admin/drug/category",children:"Lo\u1ea1i thu\u1ed1c"})},"/admin/drug/category"),Object(n.jsx)(z.a.Item,{children:Object(n.jsx)(b.b,{to:"/admin/drug/unit",children:"\u0110\u01a1n v\u1ecb t\xednh"})},"/admin/drug/unit"),Object(n.jsx)(z.a.Item,{children:Object(n.jsx)(b.b,{to:"/admin/drug",children:"Thu\u1ed1c"})},"/admin/drug"),Object(n.jsx)(z.a.Item,{children:Object(n.jsx)(b.b,{to:"/admin/drug/instruction",children:"S\u1eed d\u1ee5ng"})},"/admin/drug/instruction")]},"drug"),Object(n.jsxs)(Ie,{icon:Object(n.jsx)(F.a,{}),title:"Qu\u1ea3n l\xfd b\u1ec7nh",children:[Object(n.jsx)(z.a.Item,{children:Object(n.jsx)(b.b,{to:"/admin/disease/category",children:"Lo\u1ea1i b\u1ec7nh"})},"/admin/disease/category"),Object(n.jsx)(z.a.Item,{children:Object(n.jsx)(b.b,{to:"/admin/disease",children:"B\u1ec7nh"})},"/admin/disease")]},"disease"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(Q.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/notification",children:"Th\xf4ng b\xe1o"})},"/admin/notification"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(W.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/visit",children:"Kh\xe1m ch\u1eefa b\u1ec7nh"})},"/admin/visit"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(q.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/patient",children:"B\u1ec7nh nh\xe2n"})},"/admin/patient"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(J.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/appointment",children:"L\u1ecbch h\u1eb9n"})},"/admin/appointment"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(K.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/service",children:"D\u1ecbch v\u1ee5"})},"/admin/service"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(G.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/working-hour",children:"Gi\u1edd l\xe0m vi\u1ec7c"})},"/admin/working-hour"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)($.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/room",children:"Ph\xf2ng"})},"/admin/room"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(H.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/account",children:"T\xe0i kho\u1ea3n"})},"/admin/account"),Object(n.jsx)(z.a.Item,{icon:Object(n.jsx)(Y.a,{}),children:Object(n.jsx)(b.b,{to:"/admin/setting",children:"C\xe0i \u0111\u1eb7t"})},"/admin/setting")]})}),Object(n.jsx)(B.a,{style:{padding:"0 24px 24px"},children:Object(n.jsx)(Ee,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{path:"".concat(i,"/dashboard"),children:Object(n.jsx)(Z,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/drug/category"),children:Object(n.jsx)(ae,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/drug/unit"),children:Object(n.jsx)(se,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/drug"),exact:!0,children:Object(n.jsx)(je,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/drug/instruction"),children:Object(n.jsx)(oe,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/disease/category"),children:Object(n.jsx)(be,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/disease"),children:Object(n.jsx)(de,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/notification"),children:Object(n.jsx)(le,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/visit"),children:Object(n.jsx)(ue,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/patient"),children:Object(n.jsx)(he,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/appointment"),children:Object(n.jsx)(xe,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/service"),children:Object(n.jsx)(Oe,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/working-hour"),children:Object(n.jsx)(me,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/room"),children:Object(n.jsx)(pe,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/account"),children:Object(n.jsx)(ge,{})}),Object(n.jsx)(d.b,{path:"".concat(i,"/setting"),children:Object(n.jsx)(fe,{})}),Object(n.jsx)(d.a,{to:"/admin/dashboard"})]})})})]})]})}),["admin"])),Ne=c(372);var Me=function(){var e=Object(S.b)();function t(){return(t=Object(o.a)(j.a.mark((function t(){var c,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(c=_.a.get("EMR_token"))||!Object(D.default)(c)){t.next=7;break}return t.next=5,I();case 5:n=t.sent,e(R(n.data));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return f.a.interceptors.request.use((function(e){try{var t=_.a.get("EMR_token");t&&Object(D.default)(t)&&(e.headers.Authorization="Bearer ".concat(t))}catch(c){}return e}),(function(e){return Promise.reject(e)})),f.a.interceptors.response.use((function(e){return e}),function(){var e=Object(o.a)(j.a.mark((function e(t){var c,n,r,a,i,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.config,401!==t.response.status||c._retry||c.url==="".concat(p,"/auth/refresh-token/")){e.next=23;break}if(_.a.remove("EMR_token"),c._retry=!0,!((n=_.a.get("EMR_refresh"))&&n.length>0)){e.next=21;break}return e.prev=6,e.next=9,y(n);case 9:return r=e.sent,a=r.data.access_token,_.a.set("EMR_token",a),(i=t.config).headers.Authorization="Bearer ".concat(a),e.abrupt("return",new Promise((function(e,t){return f.a.request(i).then((function(t){return e(t)})).catch((function(e){return t(e)}))})));case 17:return e.prev=17,e.t0=e.catch(6),_.a.remove("EMR_refresh"),e.abrupt("return",Promise.reject(e.t0));case 21:e.next=25;break;case 23:o=(null===(s=t.response)||void 0===s?void 0:s.data.message)||"Unexpected error occurred",Ne.b.error(o);case 25:return e.abrupt("return",Promise.reject(t));case 26:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()),Object(r.useEffect)((function(){!function(){t.apply(this,arguments)}()}),[]),Object(n.jsx)("div",{className:"app",children:Object(n.jsx)(b.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{path:"/login",children:Object(n.jsx)(C,{})}),Object(n.jsx)(d.b,{path:"/admin",component:Se}),Object(n.jsx)(d.a,{to:"/login"})]})})})},Re=c(79),Pe={user:null};var Te=Object(Re.b)({userState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(ve.a)(Object(ve.a)({},e),{},{user:t.payload});case M:return Object(ve.a)(Object(ve.a)({},e),{},{user:null});default:return Object(ve.a)({},e)}}}),Ce="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__():Re.c,De=Object(Re.d)(Te,Ce);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(n.jsx)(S.a,{store:De,children:Object(n.jsx)(Me,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[363,1,2]]]);
//# sourceMappingURL=main.622798b1.chunk.js.map