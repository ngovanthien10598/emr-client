(this["webpackJsonpemr-client-js"]=this["webpackJsonpemr-client-js"]||[]).push([[0],{207:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),a=n(28),i=n.n(a),s=(n(207),n(38)),o=n(39),j=n(371),u=n(373),l=n(44),b=n(366),d=function(){return Object(c.jsxs)("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512.002 512.002",fill:"currentColor",xmlSpace:"preserve",children:[Object(c.jsx)("g",{children:Object(c.jsx)("g",{children:Object(c.jsxs)("g",{children:[Object(c.jsx)("circle",{cx:"338",cy:"346.001",r:"20"}),Object(c.jsx)("path",{d:"M238,472.001H80c-22.056,0-40-17.944-40-40v-164c0-22.056,17.944-40,40-40h288c22.056,0,40,17.944,40,40v40     c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20v-40c0-44.112-35.888-80-80-80h-24.037v-70.534     c0-64.771-53.832-117.466-120-117.466s-120,52.695-120,117.466v70.534H80c-44.112,0-80,35.888-80,80v164     c0,44.112,35.888,80,80,80h158c11.046,0,20-8.954,20-20S249.046,472.001,238,472.001z M143.963,117.467     c0-42.715,35.888-77.466,80-77.466s80,34.751,80,77.466v70.534h-160V117.467z"}),Object(c.jsx)("path",{d:"M503.643,325.739c-8.982-6.431-21.477-4.362-27.904,4.62l-98.581,137.7c-2.692,3.122-6.066,3.796-7.874,3.916     c-1.854,0.123-5.424-0.112-8.567-3.061l-63.708-62.171c-7.906-7.716-20.568-7.559-28.282,0.345     c-7.715,7.905-7.561,20.567,0.345,28.282l63.82,62.281c0.06,0.058,0.119,0.116,0.18,0.173C342.639,506.933,355.41,512,368.55,512     c1.129,0,2.261-0.037,3.393-0.113c14.314-0.954,27.679-7.915,36.666-19.097c0.232-0.29,0.456-0.585,0.673-0.887l98.981-138.26     C514.692,344.662,512.624,332.168,503.643,325.739z"}),Object(c.jsx)("circle",{cx:"262",cy:"346.001",r:"20"}),Object(c.jsx)("circle",{cx:"112",cy:"346.001",r:"20"}),Object(c.jsx)("circle",{cx:"187",cy:"346.001",r:"20"})]})})}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{}),Object(c.jsx)("g",{})]})},h=n(49),O=n(33),x=n.n(O),m=n(43),p="LOGIN_PENDING",f="LOGIN_SUCCESS",g="LOGIN_FAILURE",v="GET_PROFILE_PENDING",y="GET_PROFILE_SUCCESS",k="GET_PROFILE_FAILURE",w="LOGOUT",_=n(83),E=n(50),I=n.n(E),S="".concat(_.API_URL,"/auth");function P(e,t){var n="".concat(S,"/login/");return I.a.post(n,{email:e,password:t})}function L(e){var t="".concat(S,"/refresh-token/");return I.a.post(t,{refresh_token:e})}var N=n(48),R=n.n(N),T="".concat(_.API_URL,"/user");function C(){var e="".concat(T,"/profile/");return I.a.get(e)}function M(e){return{type:y,payload:e}}function F(){return function(){var e=Object(m.a)(x.a.mark((function e(t){var n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:v}),e.next=4,C();case 4:n=e.sent,c=n.data,t(M(c)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t({type:k});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}function U(){return R.a.remove("EMR_token"),R.a.remove("EMR_refresh"),function(e){e({type:w})}}var A=function(){var e=Object(o.g)(),t=Object(h.b)(),n=Object(h.c)((function(e){return e.authState})),a=Object(h.c)((function(e){return e.userState})),i=a.user;return Object(r.useEffect)((function(){if(i&&i.role){var t=function(e){if(!e)return"/login";switch(e.id){case 1:return"/admin";case 2:return"/physician";case 3:return"/receitionist";case 4:return"/patient";default:return""}}(i.role);console.log(t),e.replace(t)}}),[i]),Object(c.jsxs)(j.a,{className:"login-form",layout:"vertical",autoComplete:"off",onFinish:function(e){var n,c;t((n=e.email,c=e.password,function(){var e=Object(m.a)(x.a.mark((function e(t){var r,a,i,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:p}),e.next=4,P(n,c);case 4:r=e.sent,a=r.data,i=a.access_token,s=a.refresh_token,R.a.set("EMR_token",i,{expires:3/24}),R.a.set("EMR_refresh",s,{expires:7}),t({type:f}),t(F()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:g});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(c.jsx)("div",{className:"text-center",children:Object(c.jsxs)("div",{className:"login-form__header",children:[Object(c.jsx)(b.a,{component:d}),Object(c.jsx)("h1",{className:"text-3xl",children:"\u0110\u0103ng nh\u1eadp"})]})}),Object(c.jsx)(j.a.Item,{name:"email",children:Object(c.jsx)(u.a,{type:"email",placeholder:"Email"})}),Object(c.jsx)(j.a.Item,{name:"password",className:"m-0",children:Object(c.jsx)(u.a.Password,{placeholder:"M\u1eadt kh\u1ea9u"})}),Object(c.jsx)(s.b,{className:"block mt-2 mb-6",to:"/forgot-password",children:"Qu\xean m\u1eadt kh\u1ea9u"}),Object(c.jsx)(j.a.Item,{children:Object(c.jsx)(l.a,{loading:n.loginLoading||a.getProfileLoading,block:!0,type:"primary",size:"large",htmlType:"submit",children:"\u0110\u0103ng nh\u1eadp"})})]})},D=function(e){return Object(c.jsx)("main",{className:"login-page",children:Object(c.jsx)(A,{})})},B=n(97),G=n(369),z=n(89),H=n(382),X=n(383),V=n(384),K=n(385),Q=n(386),W=n(387),q=n(388),J=n(389),$=n(390),Y=n(391),Z=n(392),ee=n(393),te=function(){return Object(c.jsx)("div",{children:"Admin dashboard"})},ne=n(7),ce=n(367),re=n(368),ae=n(370),ie=n(372),se=n(377),oe=function(){return Object(c.jsx)(j.a,{children:Object(c.jsx)(j.a.Item,{label:"T\xean",children:Object(c.jsx)(u.a,{})})})},je=function(){var e=Object(r.useState)(!1),t=Object(ne.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),s=Object(ne.a)(i,2),o=s[0];s[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(ce.a,{justify:"space-between",children:[Object(c.jsx)(re.a,{children:Object(c.jsx)("h1",{className:"text-xl",children:"Lo\u1ea1i thu\u1ed1c"})}),Object(c.jsx)(re.a,{children:Object(c.jsx)(l.a,{type:"primary",icon:Object(c.jsx)(se.a,{}),onClick:function(){a(!0)},children:"T\u1ea1o m\u1edbi"})})]}),Object(c.jsx)(ae.a,{columns:[{title:"#",key:"#",render:function(e,t,n){return n}},{title:"T\xean",key:"name",dataIndex:"name"}],dataSource:o}),Object(c.jsx)(ie.a,{visible:n,title:"Th\xeam lo\u1ea1i thu\u1ed1c",onCancel:function(){a(!1)},children:Object(c.jsx)(oe,{})})]})},ue=n(375),le=n(376),be=n(378),de=n(379),he=function(e){var t=e.form,n=e.onFinish,r=e.defaultUnit;return Object(c.jsx)(j.a,{layout:"vertical",form:t,onFinish:n,children:Object(c.jsx)(j.a.Item,{label:"T\xean",name:"name",initialValue:null===r||void 0===r?void 0:r.name,children:Object(c.jsx)(u.a,{autoFocus:!0})})})},Oe=n(83).API_URL,xe="".concat(Oe,"/admin/manage-drug-unit");function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="".concat(xe,"/?search=").concat(e);return I.a.get(t)}function pe(e){var t="".concat(xe,"/");return I.a.post(t,{name:e})}function fe(e,t){var n="".concat(xe,"/").concat(e,"/");return I.a.put(n,{name:t})}function ge(e){var t="".concat(xe,"/").concat(e,"/");return I.a.delete(t)}var ve="CREATE",ye="UPDATE",ke=function(){var e=Object(r.useState)(!1),t=Object(ne.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),s=Object(ne.a)(i,2),o=s[0],u=s[1],b=Object(r.useState)(!1),d=Object(ne.a)(b,2),h=d[0],O=d[1],p=Object(r.useState)(!1),f=Object(ne.a)(p,2),g=f[0],v=f[1],y=Object(r.useState)(ve),k=Object(ne.a)(y,2),w=k[0],_=k[1],E=Object(r.useState)(null),I=Object(ne.a)(E,2),S=I[0],P=I[1],L=j.a.useForm(),N=Object(ne.a)(L,1)[0],R=[{title:"#",key:"#",render:function(e,t,n){return n+1}},{title:"T\xean",key:"name",dataIndex:"name"},{title:"H\xe0nh \u0111\u1ed9ng",key:"action",render:function(e,t,n){return Object(c.jsxs)(ue.b,{size:10,children:[Object(c.jsx)(l.a,{icon:Object(c.jsx)(be.a,{}),onClick:function(){return e=t,_(ye),P(e),void a(!0);var e}}),Object(c.jsx)(le.a,{onConfirm:function(){return function(e){return U.apply(this,arguments)}(t)},title:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a kh\xf4ng?",okText:"X\xf3a",okType:"danger",cancelText:"H\u1ee7y b\u1ecf",children:Object(c.jsx)(l.a,{icon:Object(c.jsx)(de.a,{})})})]})}}];function T(){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,me();case 4:t=e.sent,u(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,O(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function M(){return F.apply(this,arguments)}function F(){return(F=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,N.validateFields();case 4:if(t=e.sent,w!==ve){e.next=8;break}return e.next=8,pe(t.name);case 8:if(w!==ye){e.next=11;break}return e.next=11,fe(S.id,t.name);case 11:T(),a(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:return e.prev=18,v(!1),N.resetFields(),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[0,15,18,22]])})))).apply(this,arguments)}function U(){return(U=Object(m.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge(t.id);case 3:T(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){T()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(ce.a,{justify:"space-between",children:[Object(c.jsx)(re.a,{children:Object(c.jsx)("h1",{className:"text-xl",children:"\u0110\u01a1n v\u1ecb t\xednh"})}),Object(c.jsx)(re.a,{children:Object(c.jsx)(l.a,{type:"primary",icon:Object(c.jsx)(se.a,{}),onClick:function(){_(ve),a(!0)},children:"T\u1ea1o m\u1edbi"})})]}),Object(c.jsx)(ae.a,{rowKey:"id",columns:R,dataSource:o,loading:h}),Object(c.jsx)(ie.a,{visible:n,title:w===ve?"Th\xeam \u0111\u01a1n v\u1ecb t\xednh":"C\u1eadp nh\u1eadt \u0111\u01a1n v\u1ecb t\xednh",onCancel:function(){a(!1)},confirmLoading:g,destroyOnClose:!0,afterClose:function(){N.resetFields(),P(null)},onOk:M,children:Object(c.jsx)(he,{onFinish:M,form:N,defaultUnit:S})})]})},we=function(){return Object(c.jsx)("div",{children:"Drug Page"})},_e=function(){return Object(c.jsx)("div",{children:"Drug Instruction"})},Ee=function(){return Object(c.jsx)("div",{children:"Disease category page"})},Ie=function(){return Object(c.jsx)("div",{children:"Disease Page"})},Se=function(){return Object(c.jsx)("div",{children:"Notification Page"})},Pe=function(){return Object(c.jsx)("div",{children:"Visit page"})},Le=function(){return Object(c.jsx)("div",{children:"Patient page"})},Ne=function(){return Object(c.jsx)("div",{children:"Appointment Page"})},Re=function(){return Object(c.jsx)("div",{children:"Service Page"})},Te=function(){return Object(c.jsx)("div",{children:"WorkingHour Page"})},Ce=function(){return Object(c.jsx)("div",{children:"RoomPage"})},Me=function(){return Object(c.jsx)("div",{children:"Account Page"})},Fe=function(){return Object(c.jsx)("div",{children:"Admin setting page"})},Ue=n(1),Ae=function(e,t){return function(n){var a=Object(h.b)(),i=R.a.get("EMR_token"),s=Object(h.c)((function(e){return e.userState.user}));Object(r.useEffect)((function(){s&&s.role&&(function(e){var n=null===e||void 0===e?void 0:e.role.name;return t.includes(n)}(s)||a(U()))}),[s]);try{return i&&0!==i.length&&Object(B.a)(i)?Object(c.jsx)(e,Object(Ue.a)({},n)):Object(c.jsx)(o.a,{to:"/login"})}catch(j){console.log(j)}}},De=n(380),Be=n(381),Ge=G.a.Header,ze=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.userState.user}));return Object(c.jsxs)(Ge,{className:"header flex items-center",children:[Object(c.jsx)("div",{className:"text-2xl text-white",children:"EMR"}),Object(c.jsx)("div",{className:"ml-auto"}),Object(c.jsxs)("div",{className:"text-white",children:[null===t||void 0===t?void 0:t.first_name," ",null===t||void 0===t?void 0:t.last_name," ",Object(c.jsx)("span",{className:"ml-3",children:"|"})]}),Object(c.jsx)(l.a,{type:"default",ghost:!0,icon:Object(c.jsx)(Be.a,{}),className:"border-none",onClick:function(){ie.a.confirm({title:"\u0110\u0103ng xu\u1ea5t",icon:Object(c.jsx)(De.a,{}),content:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n \u0111\u0103ng xu\u1ea5t kh\xf4ng?",onOk:function(){e(U())}})},children:"\u0110\u0103ng xu\u1ea5t"})]})},He=G.a.Sider,Xe=G.a.Content,Ve=z.a.SubMenu,Ke=Ae((function(){var e=Object(o.i)(),t=Object(o.h)(),n=e.path;return Object(c.jsxs)(G.a,{children:[Object(c.jsx)(ze,{}),Object(c.jsxs)(G.a,{children:[Object(c.jsx)(He,{width:200,className:"site-layout-background",children:Object(c.jsxs)(z.a,{mode:"inline",style:{height:"100%",borderRight:0},selectedKeys:[t.pathname],children:[Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(H.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/dashboard",children:"B\u1ea3ng \u0111i\u1ec1u khi\u1ec3n"})},"/admin/dashboard"),Object(c.jsxs)(Ve,{icon:Object(c.jsx)(X.a,{}),title:"Qu\u1ea3n l\xfd thu\u1ed1c",children:[Object(c.jsx)(z.a.Item,{children:Object(c.jsx)(s.b,{to:"/admin/drug/category",children:"Lo\u1ea1i thu\u1ed1c"})},"/admin/drug/category"),Object(c.jsx)(z.a.Item,{children:Object(c.jsx)(s.b,{to:"/admin/drug/unit",children:"\u0110\u01a1n v\u1ecb t\xednh"})},"/admin/drug/unit"),Object(c.jsx)(z.a.Item,{children:Object(c.jsx)(s.b,{to:"/admin/drug",children:"Thu\u1ed1c"})},"/admin/drug"),Object(c.jsx)(z.a.Item,{children:Object(c.jsx)(s.b,{to:"/admin/drug/instruction",children:"S\u1eed d\u1ee5ng"})},"/admin/drug/instruction")]},"drug"),Object(c.jsxs)(Ve,{icon:Object(c.jsx)(V.a,{}),title:"Qu\u1ea3n l\xfd b\u1ec7nh",children:[Object(c.jsx)(z.a.Item,{children:Object(c.jsx)(s.b,{to:"/admin/disease/category",children:"Lo\u1ea1i b\u1ec7nh"})},"/admin/disease/category"),Object(c.jsx)(z.a.Item,{children:Object(c.jsx)(s.b,{to:"/admin/disease",children:"B\u1ec7nh"})},"/admin/disease")]},"disease"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(K.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/notification",children:"Th\xf4ng b\xe1o"})},"/admin/notification"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(Q.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/visit",children:"Kh\xe1m ch\u1eefa b\u1ec7nh"})},"/admin/visit"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(W.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/patient",children:"B\u1ec7nh nh\xe2n"})},"/admin/patient"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(q.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/appointment",children:"L\u1ecbch h\u1eb9n"})},"/admin/appointment"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(J.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/service",children:"D\u1ecbch v\u1ee5"})},"/admin/service"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)($.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/working-hour",children:"Gi\u1edd l\xe0m vi\u1ec7c"})},"/admin/working-hour"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(Y.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/room",children:"Ph\xf2ng"})},"/admin/room"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(Z.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/account",children:"T\xe0i kho\u1ea3n"})},"/admin/account"),Object(c.jsx)(z.a.Item,{icon:Object(c.jsx)(ee.a,{}),children:Object(c.jsx)(s.b,{to:"/admin/setting",children:"C\xe0i \u0111\u1eb7t"})},"/admin/setting")]})}),Object(c.jsx)(G.a,{style:{padding:"0 24px 24px"},children:Object(c.jsx)(Xe,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280},children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"".concat(n,"/dashboard"),children:Object(c.jsx)(te,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/drug/category"),children:Object(c.jsx)(je,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/drug/unit"),children:Object(c.jsx)(ke,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/drug"),exact:!0,children:Object(c.jsx)(we,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/drug/instruction"),children:Object(c.jsx)(_e,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/disease/category"),children:Object(c.jsx)(Ee,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/disease"),children:Object(c.jsx)(Ie,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/notification"),children:Object(c.jsx)(Se,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/visit"),children:Object(c.jsx)(Pe,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/patient"),children:Object(c.jsx)(Le,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/appointment"),children:Object(c.jsx)(Ne,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/service"),children:Object(c.jsx)(Re,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/working-hour"),children:Object(c.jsx)(Te,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/room"),children:Object(c.jsx)(Ce,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/account"),children:Object(c.jsx)(Me,{})}),Object(c.jsx)(o.b,{path:"".concat(n,"/setting"),children:Object(c.jsx)(Fe,{})}),Object(c.jsx)(o.a,{to:"/admin/dashboard"})]})})})]})]})}),["admin"]),Qe=n(374);n(363),n(364);var We=function(){I.a.interceptors.request.use((function(e){"delete"===e.method&&Qe.b.loading("\u0110ang th\u1ef1c hi\u1ec7n");try{var t=R.a.get("EMR_token");t&&Object(B.a)(t)&&(e.headers.Authorization="Bearer ".concat(t))}catch(n){console.log(n)}return e}),(function(e){return Promise.reject(e)})),I.a.interceptors.response.use((function(e){switch(e.config.method){case"post":console.log(e.data),e.data.id&&Qe.b.success({content:"T\u1ea1o th\xe0nh c\xf4ng"});break;case"put":case"patch":Qe.b.success({content:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"});break;case"delete":Qe.b.destroy(),Qe.b.success({content:"X\xf3a th\xe0nh c\xf4ng"})}return e}),function(){var e=Object(m.a)(x.a.mark((function e(t){var n,c,r,a,i,s,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status||n._retry||n.url==="".concat(_.API_URL,"/auth/refresh-token/")){e.next=23;break}if(R.a.remove("EMR_token"),n._retry=!0,!((c=R.a.get("EMR_refresh"))&&c.length>0)){e.next=21;break}return e.prev=6,e.next=9,L(c);case 9:return r=e.sent,a=r.data.access_token,R.a.set("EMR_token",a),(i=t.config).headers.Authorization="Bearer ".concat(a),e.abrupt("return",new Promise((function(e,t){return I.a.request(i).then((function(t){return e(t)})).catch((function(e){return t(e)}))})));case 17:return e.prev=17,e.t0=e.catch(6),R.a.remove("EMR_refresh"),e.abrupt("return",Promise.reject(e.t0));case 21:e.next=25;break;case 23:o=(null===(s=t.response)||void 0===s?void 0:s.data.message)||"Unexpected error occurred",Qe.b.error(o);case 25:return e.abrupt("return",Promise.reject(t));case 26:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}());var e=Object(h.b)();return Object(r.useEffect)((function(){!function(){try{var t=R.a.get("EMR_token");t&&Object(B.a)(t)&&e(F())}catch(n){console.log(n)}}()})),Object(c.jsx)("div",{className:"app",children:Object(c.jsx)(s.a,{children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/login",children:Object(c.jsx)(D,{})}),Object(c.jsx)(o.b,{path:"/admin",component:Ke}),Object(c.jsx)(o.a,{to:"/login"})]})})})},qe=n(79),Je={loginLoading:!1};var $e={user:null,getProfileLoading:!1};var Ye=Object(qe.c)({userState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(Ue.a)(Object(Ue.a)({},e),{},{user:null,getProfileLoading:!0});case y:return Object(Ue.a)(Object(Ue.a)({},e),{},{user:t.payload,getProfileLoading:!1});case k:case w:return Object(Ue.a)(Object(Ue.a)({},e),{},{user:null,getProfileLoading:!1});default:return Object(Ue.a)({},e)}},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(Ue.a)(Object(Ue.a)({},e),{},{loginLoading:!0});case f:case g:return Object(Ue.a)(Object(Ue.a)({},e),{},{loginLoading:!1});default:return Object(Ue.a)({},e)}}}),Ze=[n(192).a],et="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:qe.d,tt=Object(qe.e)(Ye,et(qe.a.apply(void 0,Ze)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(c.jsx)(h.a,{store:tt,children:Object(c.jsx)(We,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){"use strict";n.r(t),n.d(t,"API_URL",(function(){return c}));var c="https://emr-2020.wl.r.appspot.com/api"}},[[365,1,2]]]);
//# sourceMappingURL=main.95fe046b.chunk.js.map